if (self.CavalryLogger) { CavalryLogger.start_js(["3k0IwOl"]); }

__d("Text.react",[],(function(a,b,c,d,e,f){"use strict";a="span";f["default"]=a}),66);
__d("DialogHideOnSuccess",["csx","CSS"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this._layer=a}var c=a.prototype;c.enable=function(){this._subscription=this._layer.subscribe("success",this._handle.bind(this))};c.disable=function(){this._subscription.unsubscribe(),this._subscription=null};c._handle=function(a,c){b("CSS").matchesSelector(c.getTarget(),"._s")&&this._layer.hide()};return a}();Object.assign(a.prototype,{_subscription:null});e.exports=a}),null);
__d("CurationCaretNux",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","DataStore","Event","NavigationMessage","Parent","Rect","ge","tidyEvent"],(function(a,b,c,d,e,f,g,h){var i="div._1zpr",j="div._6ks",k="._3x-2 img.img",l="span.text_exposed_link",m="_5jmm",n="CurationCaretNux_instance",o="CurationCaretNux_caretMenuLoaded",p=100,q="LINK_WELCOME",r="VIDEO_WELCOME",s="POST_SAVE_WELCOME",t="PHOTO_WELCOME",u="caret_nux",v="save_option_nux",w="seen",x="dismissed",y="focus",z="click",A="scroll",B=!1,C=null,D=null;a=function(){"use strict";function a(a,c,d,e,f,g){e=b("ge")(e);if(e){this.container=e;this.caret=d;this.caretNux=a.instance;this.caretNuxData=a;this.saveOptionNux=c.instance;this.saveOptionNuxData=c;this.allowAutoplayNux=g;this.popoverTriggered=!1;d=b("Parent").byClass(e,m);b("DataStore").set(d,n,this);switch(f){case q:this.$1();break;case r:this.$1();this.$2();this.$3();break;case s:this.$4();break;case t:this.$5();break}b("Arbiter").subscribeOnce(b("NavigationMessage").NAVIGATION_BEGIN,function(){this.caretNux&&this.caretNux.hide(),this.saveOptionNux&&this.saveOptionNux.hide()}.bind(this))}}var c=a.prototype;c.$1=function(){var a=b("DOM").scry(this.container,i);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){if(B||this.videoPlaying)return;this.caretNux.subscribe("show",function(){this.$6()}.bind(this));this.caretNux.subscribe("hide",function(){this.$7(),B&&(this.$8(u,w),this.$8(u,x))}.bind(this));this.$9();this.interactionTime=0;window.setTimeout(function(){this.$10()||(B=!0,this.caretNux.show())}.bind(this),this.caretNuxData.min_consume_duration);window.setTimeout(function(){this.$10()||(B=!1,this.caretNux.hide())}.bind(this),this.caretNuxData.max_consume_duration);var a=Date.now();window.setTimeout(function(){this.$11(function(){this.interactionTime||(this.interactionTime=Date.now()-a)}.bind(this))}.bind(this),0)}.bind(this))])};c.$2=function(){var a=b("DOM").scry(this.container,j);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){this.videoPlaying=!0}.bind(this))])};c.$3=function(){if(!this.allowAutoplayNux)return;D===null&&(D=this.caretNuxData.min_consume_duration);C===null&&!B&&(C=b("Arbiter").subscribe("flash/updateStatus",function(a,c){if(!B&&D!==null&&c.position*1e3>D){a=b("Parent").byClass(b("ge")(c.divID),m);c=b("DataStore").get(a,n);c&&(B=!0,c.caretNux.show(),c.$6(),b("Arbiter").unsubscribe(C))}}))};c.$4=function(){var a=b("DOM").scry(this.container,l);a.length>0&&b("tidyEvent")([b("Event").listen(a[0],"click",function(){if(B)return;B=!0;this.caretNux.show();this.$6()}.bind(this))])};c.$5=function(){var a=b("DOM").scry(this.container,k);a.forEach(function(a){a=b("Parent").byTag(a,"a");if(!a)return;b("Event").listen(a,"click",function(){if(B)return;var a=b("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){var c=Date.now(),d=b("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){var a=Date.now()-c;a>this.caretNuxData.min_consume_duration&&a<this.caretNuxData.max_consume_duration&&(B=!0,this.caretNux.show(),this.$6());b("Arbiter").unsubscribe(d)}.bind(this));b("Arbiter").unsubscribe(a)}.bind(this))}.bind(this))},this)};c.$10=function(){return this.interactionTime&&this.interactionTime>0};c.$6=function(){this.caretClickListener=b("Event").listen(this.caret,"click",function(){this.caretNux.hide(),this.saveOptionNux&&(this.popoverTriggered=!0,this.$12())}.bind(this));var a=!1,c=function(c){if(a||c===z||!this.caretNux.isShown())return;c=b("Rect").getViewportWithoutScrollbarsBounds();var d=b("Rect").getElementBounds(this.caretNux.getContentRoot());d=d.sub(0,p);c.contains(d)&&(this.$8(u,w),a=!0)}.bind(this);c();this.$9();this.$11(c)};c.$7=function(){this.caretClickListener.remove(),this.$13()};c.$12=function(){this.$14()&&this.popoverTriggered&&window.setTimeout(function(){var a=b("DOM").scry(document,"li.save_caret_menu_item");for(var c=0;c<a.length;c++){var d=a[c],e=b("Parent").byClass(d,"uiLayer");if(e&&b("CSS").shown(e)){this.saveOptionNux.setContext(d);break}}this.saveOptionNux.show();this.$8(v,w);e=b("DataStore").get(this.caret,"Popover");e&&e.subscribeOnce("hide",function(){this.saveOptionNux.hide()}.bind(this))}.bind(this),0)};c.$8=function(a,c){var d;if(a===u)d=this.caretNuxData;else if(a===v)d=this.saveOptionNuxData;else throw new Error("Invalid nux type");var e;if(c===w)e=d.seen_uri,d.seen_uri=null;else if(c===x)e=d.dismiss_uri,d.dismiss_uri=null;else throw new Error("Invalid impression type");if(e){c=new(b("AsyncRequest"))(e);this.interactionTime&&a===u&&c.setData({interaction_time:this.interactionTime});c.send()}};c.$11=function(a){this.$15.push(a)};c.$16=function(a){this.$15.forEach(function(b){b.call(this,a)},this)};c.$9=function(){this.$17||(this.$15=[],this.$17=[b("Event").listen(window,"click",this.$16.bind(this,z)),b("Event").listen(window,"focus",this.$16.bind(this,y)),b("Event").listen(window,"scroll",this.$16.bind(this,A))])};c.$13=function(a){if(this.$17){while(this.$17.length)this.$17.pop().remove();this.$17=null;this.$15=null}};c.$14=function(){var a=b("Parent").byClass(this.container,m);return b("DataStore").get(a,o)===!0};a.saveOptionLoaded=function(a){a=b("ge")(a);if(a){a=b("Parent").byClass(a,m);if(a){b("DataStore").set(a,o,!0);a=b("DataStore").get(a,n);a&&a.$12()}}};return a}();e.exports=a}),null);
__d("ContextualLayerInlineTabOrder",["DOM","DOMTraverser","Event","Focus","Keys","SubscriptionsHandler","TabbableElements","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this._layer=a,this._isSetup=!1,this._ignoreFocus=!1,this._layerFocused=!0,this._layerRoot=this._layer.getContentRoot(),this._layerID=c("getOrCreateDOMID")(this._layerRoot),this._mutedTabbables=new Map([]),this._subscriptions=new(c("SubscriptionsHandler"))(),this._tabbableLayerElements=[]}var b=a.prototype;b.enable=function(){this._subscriptions.addSubscriptions(this._layer.subscribe("aftershow",this._onAfterShow.bind(this)),this._layer.subscribe("hide",this._onAfterHide.bind(this))),this._layer.isShown()&&this._onAfterShow()};b.disable=function(){this._subscriptions.release(),this._isSetup=!1};b._getContext=function(){return this._layer.getCausalElement()};b._getContextOwns=function(){var a=this._getContext();if(!a)return[];a=(a.getAttribute("aria-owns")||"").trim();a=a?a.match(/[^ ]+/g):[];return a};b._identifyTabbableElements=function(){this._tabbableLayerElements=d("TabbableElements").find(this._layerRoot),!this._tabbableLayerElements.length&&!this._mutedTabbables.size&&this._layerRoot.setAttribute("tabindex","0"),this._layerRoot.tabIndex>=0&&this._tabbableLayerElements.unshift(this._layerRoot)};b._onAfterShow=function(){this._setupTabBehavior();var a=this._getContext(),b=this._getContextOwns();a&&!b.includes(this._layerID)&&(b.push(this._layerID),a.setAttribute("aria-owns",b.join(" ")))};b._onAfterHide=function(){var a=this._getContext();if(a){var b=this._getContextOwns(),c=b.indexOf(this._layerID);c>-1&&(b.splice(c,1),a.setAttribute("aria-owns",b.join(" ")))}};b._setupTabBehavior=function(){if(!this._isSetup){var a=this._getContext();if(!this._layerRoot||!a)return;this._setupTabTriggers();this._setupTabToggle();this._isSetup=!0}};b._setupTabTriggers=function(){var a=this._getContext();d("TabbableElements").isTabbable(a)||a.setAttribute("tabindex","0");this._subscriptions.addSubscriptions(c("Event").listen(a,"keyup",this._checkNUXFocus.bind(this)),c("Event").listen(a,"keydown",this._checkNUXFocus.bind(this)),c("Event").listen(this._layerRoot,"keydown",this._checkContextFocus.bind(this)),c("Event").listen(this._layerRoot,"layerFocus",this._setNUXFocusStart.bind(this)),c("Event").listen(this._layerRoot,"layerFocusEnd",this._setNUXFocusEnd.bind(this)),c("Event").listen(this._layerRoot,"tempFocusIgnore",this._tempIgnoreFocus.bind(this)))};b._setupTabToggle=function(){this._handleLayerBlur(),this._subscriptions.addSubscriptions(c("Event").listen(document.documentElement,"click",this._checkForFocus.bind(this)),c("Event").listen(document.documentElement,"keydown",this._checkForFocus.bind(this)))};b._handleLayerBlur=function(){if(!this._layerFocused)return;this._identifyTabbableElements();this._tabbableLayerElements.forEach(function(a){if(!this._mutedTabbables.has(a)){var b=a.getAttribute("tabindex");a.setAttribute("tabindex","-1");this._mutedTabbables.set(a,b)}},this);this._layerFocused=!1};b._handleLayerFocus=function(){if(this._layerFocused)return;for(var a=this._mutedTabbables,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;var e=d[0];d=d[1];d===null?e.removeAttribute("tabindex"):e.setAttribute("tabindex",d)}this._mutedTabbables.clear();this._layerFocused=!0};b._checkNUXFocus=function(a){if(this._ignoreFocus){a.preventDefault();this._ignoreFocus=!1;return}if(a.getTarget()!==this._getContext()||!this._layer.isShown())return;var b=c("Event").getKeyCode(a),d=this._getContextOwns();if(!d.length||b!==c("Keys").TAB)return;b=a.getModifiers();b=b.shift;var e=d[0]===this._layerID;d=d[d.length-1]===this._layerID;(a.type==="keydown"&&b&&d||a.type==="keyup"&&!b&&e)&&(a.preventDefault(),c("Event").fire(this._layerRoot,b?"layerFocusEnd":"layerFocus"))};b._setNUXFocusStart=function(){this._handleLayerFocus(),this._identifyTabbableElements(),d("Focus").set(this._tabbableLayerElements[0])};b._setNUXFocusEnd=function(){this._handleLayerFocus(),this._identifyTabbableElements(),d("Focus").set(this._tabbableLayerElements[this._tabbableLayerElements.length-1])};b._tempIgnoreFocus=function(){this._ignoreFocus=!0};b._checkContextFocus=function(a){var b=c("Event").getKeyCode(a),d=a.getModifiers();d=d.shift;this._handleLayerFocus();this._identifyTabbableElements();if(!this._tabbableLayerElements.length||b!==c("Keys").TAB||!this._getContext())return;b=this._tabbableLayerElements[0];var e=this._tabbableLayerElements[this._tabbableLayerElements.length-1];a.getTarget()===e&&!d?this._setFocusAfterLayer()&&a.preventDefault():a.getTarget()===b&&d&&(this._setFocusBeforeLayer()&&a.preventDefault())};b._isTabbableNode=function(a){return d("TabbableElements").isTabbable(a)&&!c("DOM").contains(this._layerRoot,a)};b._setFocusBeforeLayer=function(){var a=this._getContextOwns();if(!a||!a.length)return!1;if(a[0]===this._layerID){var b=d("DOMTraverser").previousFilteredNode(document.body,this._getContext(),this._isTabbableNode.bind(this));d("Focus").set(b);return!0}if(a.includes(this._layerID)){b=a[a.indexOf(this._layerID)-1];return this._focusOnElement(b,!0)}return!1};b._setFocusAfterLayer=function(){var a=this._getContextOwns();if(!a||!a.length)return!1;if(a[a.length-1]===this._layerID){this._refocusOnContext();return!0}if(a.includes(this._layerID)){a=a[a.indexOf(this._layerID)+1];return this._focusOnElement(a,!1)}return!1};b._focusOnElement=function(a,b){a=document.getElementById(a);if(!a)return!1;c("Event").fire(a,b?"layerFocusEnd":"layerFocus");this._handleLayerBlur();return!0};b._refocusOnContext=function(a){a=this._getContext();var b=this._getContextOwns();c("Event").fire(document.getElementById(b[0]),"tempFocusIgnore");this._handleLayerBlur();a&&(a.tabIndex==null?(a.tabIndex=-1,d("Focus").setWithoutOutline(a)):d("Focus").set(a))};b._checkForFocus=function(a){a=a.getTarget();var b=this._layer.getContentRoot();b=c("DOM").contains(b,a);!this._ignoreFocus&&!this._layerFocused&&b&&this._handleLayerFocus();this._layerFocused&&!b&&this._handleLayerBlur()};return a}();g["default"]=a}),98);
__d("LayerDestroyOnHide",["setTimeout"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this._layer=a}var b=a.prototype;b.enable=function(){var a=this._layer.destroy.bind(this._layer);this._subscription=this._layer.subscribe("hide",function(){c("setTimeout")(a,0)})};b.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)};return a}();Object.assign(a.prototype,{_subscription:null});g["default"]=a}),98);
__d("LayerRemoveOnHide",["DOM"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this._layer=a}var b=a.prototype;b.enable=function(){this._subscription=this._layer.subscribe("hide",c("DOM").remove.bind(null,this._layer.getRoot()))};b.disable=function(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)};return a}();Object.assign(a.prototype,{_subscription:null});g["default"]=a}),98);
__d("isValidUniqueID",[],(function(a,b,c,d,e,f){function a(a){return a!==null&&a!==void 0&&a!==""&&(typeof a==="string"||typeof a==="number")}f["default"]=a}),66);
__d("SearchableEntry",["invariant","FbtResultBase","HTML","isValidUniqueID"],(function(a,b,c,d,e,f,g,h){function i(a){if(a==null||a==="")return"";else if(typeof a==="string")return a;else if(a instanceof c("FbtResultBase"))return a.toString();else if(typeof a==="object"){a=c("HTML").replaceJSONWrapper(a);if(c("HTML").isHTML(a)){a=a.getRootNode();return a.textContent||a.innerText||""}else return""}else return""}a=function(){function a(a){this.valueOf=this.getUniqueID;c("isValidUniqueID")(a.uniqueID)||h(0,3851,a.uniqueID);this.$8=a.uniqueID+"";a.title instanceof c("FbtResultBase")&&(a.title=a.title.toString());a.title!=null&&typeof a.title==="string"||h(0,3852,a.title);this.$6=a.title;this.$3=a.order||0;this.$5=i(a.subtitle);this.$2=a.keywordString||"";this.$4=a.photo||"";this.$9=a.uri||"";this.$7=i(a.type);var b=a.auxiliaryData==null?{}:a.auxiliaryData;this.$1=b;this.$10=a.dataType||""}var b=a.prototype;b.getUniqueID=function(){return this.$8};b.getOrder=function(){return this.$3};b.getTitle=function(){return this.$6};b.getSubtitle=function(){return this.$5};b.getKeywordString=function(){return this.$2};b.getPhoto=function(){return this.$4};b.getURI=function(){return this.$9};b.getType=function(){return this.$7};b.getAuxiliaryData=function(){return this.$1};b.getDataType=function(){return this.$10};b.toPlainObject=function(){return{auxiliaryData:this.$1,keywordString:this.$2,order:this.$3,photo:this.$4,subtitle:this.$5,title:this.$6,type:this.$7,uniqueID:this.$8,uri:this.$9,dataType:this.$10}};return a}();g["default"]=a}),98);