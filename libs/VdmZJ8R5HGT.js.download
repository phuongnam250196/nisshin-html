if (self.CavalryLogger) { CavalryLogger.start_js(["oCqh3d9"]); }

__d("FBEmojiAliases",[],(function(a,b,c,d,e,f){e.exports={}}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0};e.exports=a}),null);
__d("PagesManagerInboxTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAutomatedResponseTriggerType=function(a){this.$1.automated_response_trigger_type=a;return this};c.setBroadcastAudience=function(a){this.$1.broadcast_audience=a;return this};c.setBroadcastMessageFormat=function(a){this.$1.broadcast_message_format=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setFirstPayloadTime=function(a){this.$1.first_payload_time=a;return this};c.setFolder=function(a){this.$1.folder=a;return this};c.setHadError=function(a){this.$1.had_error=a;return this};c.setHref=function(a){this.$1.href=a;return this};c.setIsCached=function(a){this.$1.is_cached=a;return this};c.setIsInboxRedesignWithSideNav=function(a){this.$1.is_inbox_redesign_with_side_nav=a;return this};c.setItemsCount=function(a){this.$1.items_count=a;return this};c.setLoadTime=function(a){this.$1.load_time=a;return this};c.setMessage=function(a){this.$1.message=a;return this};c.setModuleName=function(a){this.$1.module_name=a;return this};c.setNuxID=function(a){this.$1.nux_id=a;return this};c.setPageCommItemID=function(a){this.$1.page_comm_item_id=a;return this};c.setPageCommItemStatus=function(a){this.$1.page_comm_item_status=a;return this};c.setPageCommSearch=function(a){this.$1.page_comm_search=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setScreenHeight=function(a){this.$1.screen_height=a;return this};c.setScreenWidth=function(a){this.$1.screen_width=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=a;return this};c.setThreadToken=function(a){this.$1.thread_token=a;return this};c.setTimeSinceLoad=function(a){this.$1.time_since_load=a;return this};c.setTraceID=function(a){this.$1.trace_id=a;return this};c.setUsesStreamingPagination=function(a){this.$1.uses_streaming_pagination=a;return this};c.setViewMode=function(a){this.$1.view_mode=a;return this};return a}();c={automated_response_trigger_type:!0,broadcast_audience:!0,broadcast_message_format:!0,event_name:!0,first_payload_time:!0,folder:!0,had_error:!0,href:!0,is_cached:!0,is_inbox_redesign_with_side_nav:!0,items_count:!0,load_time:!0,message:!0,module_name:!0,nux_id:!0,page_comm_item_id:!0,page_comm_item_status:!0,page_comm_search:!0,page_comm_search_type:!0,page_id:!0,platform:!0,screen_height:!0,screen_width:!0,stack_trace:!0,thread_token:!0,time_since_load:!0,trace_id:!0,uses_streaming_pagination:!0,view_mode:!0};e.exports=a}),null);
__d("PagesMessagingInboxActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setInboxAction=function(a){this.$1.inbox_action=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={inbox_action:!0,page_comm_search_type:!0,platform:!0};e.exports=a}),null);
__d("MessengerUserProfileLocationUtilsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MessengerUserProfileLocationUtilsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MessengerUserProfileLocationUtilsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2746984198655487",metadata:{},name:"MessengerUserProfileLocationUtilsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LiveChatPluginUserContactQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_preferred",storageKey:null},{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null},b={alias:null,args:null,concreteType:"Email",kind:"LinkedField",name:"all_emails",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_primary",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveChatPluginUserContactQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null},b],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"LiveChatPluginUserContactQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},b],storageKey:null}]},params:{id:"4278703475493869",metadata:{},name:"LiveChatPluginUserContactQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LivechatPluginGuestMessageThreadQueryContainerQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],b=[{kind:"Variable",name:"data",variableName:"data"}],c={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"unread_count",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"messages_count",storageKey:null},f={alias:"last_read_receipt",args:[{kind:"Literal",name:"last",value:1}],concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:"action",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},{alias:"watermark",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null}],storageKey:null}],storageKey:"read_receipts(last:1)"},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},j={alias:null,args:null,concreteType:"MessageSourceData",kind:"LinkedField",name:"message_source_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_source",storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"tags_list",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},m={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"message_thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null}],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"platform_xmd_encoded",storageKey:null},p={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"is_sponsored",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_user_generated",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"extensible_message_admin_text_type",storageKey:null},s],type:"GenericAdminTextMessage",abstractKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],v={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:u,storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},x={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"file_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},w],type:"MessageFile",abstractKey:null},y={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},B={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[y,z,A],storageKey:null},C={kind:"InlineFragment",selections:[B,w],type:"MessageImage",abstractKey:null},D={alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null};B={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},D,w,B],type:"MessageVideo",abstractKey:null};var E={alias:null,args:null,kind:"ScalarField",name:"unread",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null};u={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:u,storageKey:null};y=[y,A,z];var H={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:y,storageKey:null};y={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:y,storageKey:null};var I={alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},J={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[H,y,I],storageKey:null},K=[g],L={alias:null,args:null,kind:"ScalarField",name:"template_type",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"image_width",storageKey:null},N=[g,{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_render_style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_open_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null}],O={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:N,storageKey:null};N={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:N,storageKey:null};D={kind:"InlineFragment",selections:[D,z,A,g],type:"Video",abstractKey:null};z={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null};A={alias:null,args:null,kind:"ScalarField",name:"image_url",storageKey:null};var P={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"first_metaline",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"second_metaline",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"third_metaline",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"image_aspect_ratio",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"source_name",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},X={kind:"InlineFragment",selections:K,type:"Node",abstractKey:"__isNode"},Y={kind:"InlineFragment",selections:K,type:"GenericAttachmentMedia",abstractKey:null},Z={kind:"InlineFragment",selections:K,type:"MontageImage",abstractKey:null},$={kind:"InlineFragment",selections:K,type:"MontageVideo",abstractKey:null};H={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[W,H,y,I,X,Y,Z,$],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LivechatPluginGuestMessageThreadQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"guest_message_thread",plural:!1,selections:[c,d,e,f,{alias:null,args:null,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[h,i,j,k,l,m,n,o,p,q,r,t,{kind:"InlineFragment",selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[x,C,B],storageKey:null},E,{alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[g,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[F,G,u,J,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:K,storageKey:null}],storageKey:null},F,G,u,J,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[g,{kind:"InlineFragment",selections:[L,w,M,s,O,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[O,N,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[D],storageKey:null},z,A,P,Q,R,S,g,T,U,V],storageKey:null}],storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LivechatPluginGuestMessageThreadQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"guest_message_thread",plural:!1,selections:[c,d,e,f,{alias:null,args:null,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[W,h,i,j,k,l,m,n,o,p,q,r,t,{kind:"InlineFragment",selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[W,x,C,B,X],storageKey:null},E,{alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[g,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[F,G,u,H,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[W,g],storageKey:null}],storageKey:null},F,G,u,H,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[W,g,{kind:"InlineFragment",selections:[L,w,M,s,O,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[O,N,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[W,D,X,Y,Z,$],storageKey:null},z,A,P,Q,R,S,g,T,U,V],storageKey:null}],storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserMessage",abstractKey:null},X],storageKey:null}],storageKey:null},g],storageKey:null}]},params:{id:"4608766189145597",metadata:{},name:"LivechatPluginGuestMessageThreadQueryContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MessagingPluginGuestSendTextMessageMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessagingPluginGuestSendTextMessageMutation",selections:[{alias:null,args:b,concreteType:"MessagingPluginGuestTextSendResponsePayload",kind:"LinkedField",name:"live_chat_guest_send_text_message",plural:!1,selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[d,e],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessagingPluginGuestSendTextMessageMutation",selections:[{alias:null,args:b,concreteType:"MessagingPluginGuestTextSendResponsePayload",kind:"LinkedField",name:"live_chat_guest_send_text_message",plural:!1,selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,e,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}]},params:{id:"4343444915684861",metadata:{},name:"MessagingPluginGuestSendTextMessageMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("FBCarouselArrow.react",["cx","ix","xuiglyph","CenteredContainer.react","Image.react","Locale","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h,i,j){var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$1=function(){var a=i("88862"),b=i("88874");if(d("Locale").isRTL()){var e=[b,a];a=e[0];b=e[1]}return c.props.direction==="forward"?b:a},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){var a=c("joinClasses")(this.props.className,"_10sf"+(this.props.fullBleed?" _5x5-":"")+(this.props.direction==="forward"?" _5x5_":"")+(this.props.direction==="backward"?" _5x60":""));return k.jsx("div",babelHelpers["extends"]({},this.props,{className:a,children:k.jsx(c("CenteredContainer.react"),{className:"_5x6d",vertical:!0,children:k.jsx(c("Image.react"),{className:"_3-8w",src:this.$1()})})}))};return b}(k.Component);a.propTypes={direction:c("prop-types").oneOf(["forward","backward"]).isRequired,fullBleed:c("prop-types").bool};g["default"]=a}),98);
__d("AdsArrowedContainer.react",["fbt","invariant","FBCarouselArrow.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Link.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.$1("left"),b=this.$1("right");a=this.$2(this.props.isLeftArrowOverlappingContent?"left":"leftOfChild",a);b=this.$2("right",b);return j.jsxs(c("FBOverlayContainer.react"),babelHelpers["extends"]({},this.props,{children:[j.jsx(c("FBOverlayBase.react"),{children:this.props.children}),a,b]}))};d.$1=function(a){var b,d;switch(a){case"left":b=this.props.onDecrement!==null;d=this.props.onDecrement;break;case"right":b=this.props.onIncrement!==null;d=this.props.onIncrement;break;default:i(0,6086,a)}return!b?null:j.jsx(c("Link.react"),{"aria-label":a==="left"?h._("\u0111i\u1ec1u h\u01b0\u1edbng quay l\u1ea1i"):h._("\u0111i\u1ec1u h\u01b0\u1edbng chuy\u1ec3n ti\u1ebfp"),className:this.props.isArrowCentered?"":"bo3vj1wz",onClick:d,children:j.jsx(c("FBCarouselArrow.react"),{direction:a==="left"?"backward":"forward",fullBleed:a==="left"&&this.props.isLeftArrowOverlappingContent})})};d.$2=function(a,b){if(b!=null)if(this.props.isArrowCentered)return j.jsx(c("FBOverlayElement.react"),{horizontal:a,vertical:"middle",children:b});else return j.jsx(c("FBOverlayElement.react"),{horizontal:a,children:b});return null};return b}(j.Component);a.defaultProps={isArrowCentered:!1,isLeftArrowOverlappingContent:!0};g["default"]=a}),98);
__d("AdsCarousel.react",["cx","FlexLayout.react","Locale","ReactDOM","ResponsiveBlock.react","clamp","emptyFunction","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={computedOffset:0},c.$5=function(a,b){c.$1(c.props.index)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.$1(this.props.index)};e.componentDidUpdate=function(){this.$1(this.props.index)};e.$1=function(a){if(!d("ReactDOM").findDOMNode(this))return;var b=d("ReactDOM").findDOMNode(this),e=d("ReactDOM").findDOMNode(this.refs.inner);if(!(b instanceof HTMLElement)||!(e instanceof HTMLElement))return;b=b.offsetWidth;e=e.offsetWidth;e=Math.max(e-b,0);b=0;for(var f=0;f<a&&b<e;f++){var g=this.$2(f);g&&(b+=g.offsetWidth)}b=c("clamp")(b,0,e);if(b!==this.state.computedOffset)this.setState({computedOffset:b});else{g=this.props.onUpdated;g&&g(this.$3())}};e.$4=function(a){var b=0;for(var c=0;c<a;c++){var d=this.$2(c);d&&(b+=d.offsetWidth)}return b};e.$2=function(a){a=this.refs["child_"+a];var b=d("ReactDOM").findDOMNode(a);return a&&b instanceof HTMLElement?b:null};e.render=function(){var a=i.Children.map(this.props.children,function(a,b){return i.jsx("div",{className:"_2zgz",ref:"child_"+b,children:a},b)}),b=null;if(this.state.computedOffset){var e=String(-this.state.computedOffset)+"px";b=d("Locale").isRTL()?{right:e}:{left:e}}return i.jsx(c("ResponsiveBlock.react"),{onResize:this.$5,children:i.jsx("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_a28"),children:i.jsx("div",{className:"_a2e",ref:"inner",style:b,children:this.props.itemsFillHeight?i.jsx(c("FlexLayout.react"),{align:"stretch",direction:"horizontal",children:a}):a})}))})};e.$3=function(){var a=d("ReactDOM").findDOMNode(this),b=this.state.computedOffset;a instanceof HTMLElement&&(b+=a.offsetWidth);a=this.$4(this.props.index);var c=0,e=this.props.index,f=null;while(f=this.$2(e++))if(d("Locale").isRTL())if(a+f.offsetWidth<=b)c++,a+=f.offsetWidth;else break;else if(f.offsetLeft+f.offsetWidth<=b)c++;else break;return c};return b}(i.Component);a.propTypes={index:c("prop-types").number.isRequired,itemsFillHeight:c("prop-types").bool,onUpdated:c("prop-types").func};a.defaultProps={onUpdated:c("emptyFunction"),itemsFillHeight:!1};g["default"]=a}),98);
__d("AdsArrowedCarouselEnhanced.react",["AdsArrowedContainer.react","AdsCarousel.react","prop-types","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={firstVisibleIndex:0,visibleChildrenCount:0},c.$5=function(){var a=c.$4();c.setState({firstVisibleIndex:c.state.firstVisibleIndex-a})},c.$6=function(){var a=c.$3();c.setState({firstVisibleIndex:c.state.firstVisibleIndex+a})},c.$7=function(a){c.setState({visibleChildrenCount:a})},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(!a.currentSelectedShouldVisible)return;a=a.currentSelectedIndex;if(this.$1(a))this.setState({firstVisibleIndex:a});else if(this.$2(a)){var b=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1;a=a-b;this.setState({firstVisibleIndex:this.state.firstVisibleIndex+a})}};d.$1=function(a){return a<this.state.firstVisibleIndex};d.$2=function(a){var b=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1;return a>b};d.render=function(){var a=this.$3(),b=this.$4();return h.jsx(c("AdsArrowedContainer.react"),{className:this.props.className,isArrowCentered:!0,isLeftArrowOverlappingContent:this.props.isLeftArrowOverlappingContent!=null?this.props.isLeftArrowOverlappingContent:!0,onDecrement:b?this.$5:null,onIncrement:a?this.$6:null,children:h.jsx(c("AdsCarousel.react"),{index:this.state.firstVisibleIndex,onUpdated:this.$7,children:this.props.children})})};d.$3=function(){var a=this.state.visibleChildrenCount;a=h.Children.count(this.props.children)-this.state.firstVisibleIndex-a;return a<=0?0:Math.min(a,this.props.maxChangeAmount||1)};d.$4=function(){return Math.min(this.state.firstVisibleIndex,this.props.maxChangeAmount||1)};return b}(h.PureComponent);a.propTypes={currentSelectedIndex:c("prop-types").number,currentSelectedShouldVisible:c("prop-types").bool,maxChangeAmount:c("prop-types").number};a.defaultProps={currentSelectedIndex:0,currentSelectedShouldVisible:!1,maxChangeAmount:1};g["default"]=a}),98);
__d("MWChatVideoPlayerControls.react",["VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerFullscreenControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerScrubber.react","VideoPlayerVolumeControl.react","react","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){return h.jsx("span",{className:"fi2e5rcv jk2qo03r",children:a.children})}i.displayName=i.name+" [from "+f.id+"]";function a(a){var b=c("useVideoPlayerDefaultControlsVisibility")(),e=b.isControlsVisible;b=b.onUserInteraction;var f=d("VideoPlayerHooks").usePaused();f=c("useVideoPlayerBigPlayButtonOverlay")({forceVisible:f});var g=f.bigPlayButtonElement;f=f.bigPlayButtonIsVisible;var j=d("VideoPlayerHooks").useIsFullscreen();e=e&&!f;f=h.jsx(c("VideoPlayerControlsContainerOverlay.react"),{isVisible:e,children:j?h.jsxs(h.Fragment,{children:[h.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[h.jsx(c("VideoPlayerPlaybackControl.react"),{}),h.jsx(c("VideoPlayerPlaybackTimer.react"),{})]}),h.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:h.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:b})}),h.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[h.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:b}),h.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:b})]})]}):h.jsxs(h.Fragment,{children:[h.jsx(d("VideoPlayerControlsGroups.react").Contracted,{children:h.jsx(i,{children:h.jsx(c("VideoPlayerPlaybackControl.react"),{})})}),h.jsx(d("VideoPlayerControlsGroups.react").Expanded,{children:h.jsx(c("VideoPlayerScrubber.react"),{onUserInteraction:b})}),h.jsxs(d("VideoPlayerControlsGroups.react").Contracted,{children:[a.hideExpandButton?null:h.jsx(i,{children:h.jsx(c("VideoPlayerFullscreenControl.react"),{onUserInteraction:b})}),h.jsx(i,{children:h.jsx(c("VideoPlayerVolumeControl.react"),{onUserInteraction:b})})]})]})});return h.jsxs(h.Fragment,{children:[g,f]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatVideoPlayer.react",["GraphQLVideoAutoplayGatingResult","MWChatVideoAutoplaySettingContext","MWChatVideoPlayerControls.react","VideoPlayerDefaultControls.react","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerSurface.react","VideoPlayerX.react","getVideoPlayerAutoplayProps","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=function(a,b){switch(a){case"mwchat":return h.jsx(c("MWChatVideoPlayerControls.react"),{hideExpandButton:b===!0});case"default":return h.jsx(c("VideoPlayerDefaultControls.react"),{});case"none":return null;default:return null}};function a(a){var b=a.controls,e=a.fbid,f=a.hdSrc,g=a.hideExpandButton,j=a.initialForceHD,k=a.originalHeight,l=a.originalWidth;a=a.sdSrc;j=d("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:f,hdSrcPreferred:(f=j)!=null?f:!1,sdSrc:a});f=d("MWChatVideoAutoplaySettingContext").useMWChatVideoAutoplaySetting();if(j==null)return null;a=[{Component:c("VideoPlayerProgressiveImplementationV2.react"),data:j,typename:"VideoPlayerProgressiveImplementation"}];j=c("getVideoPlayerAutoplayProps")(d("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult("unknown",f,!0),"respect_user_settings",null);return h.createElement(c("VideoPlayerX.react"),babelHelpers["extends"]({},j,{implementations:a,key:e,loopCount:-1,originalHeight:k,originalWidth:l,playerOriginOverride:"messaging",portalingEnabled:!1,subOrigin:"messenger_thread",videoFBID:e}),h.jsx(c("VideoPlayerSurface.react"),{children:i(b,g)}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerTextWithEntities.react",["BaseTextWithEntities.react","Link.react","MessengerTextWithEmoticons.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){return a.replace(/<3\b|&hearts;/g,"\u2665")}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){if(d.props.renderEmoticons||d.props.renderEmoji)return h.jsx(c("MessengerTextWithEmoticons.react"),{text:a,customSize:d.props.customSize,renderEmoticons:d.props.renderEmoticons,renderEmoji:d.props.renderEmoji});else return i(a)},d.$2=function(a,b){if(d.props.interpolator)return d.props.interpolator(a,b);else return h.jsx(c("Link.react"),{href:b.entity,children:a})},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){return h.jsx(c("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$1}))};return b}(h.Component);g["default"]=a}),98);
__d("MessengerSharedPhotoReact.bs",["cx","fbt","CssBackgroundImage.react","Link.react","bs_curry","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={height:"100%"};function a(a){var c=a.className,d=a.fbid,e=a.onClick,f=a.uri;a=a.isSpherical;var g=function(a){a.preventDefault();return b("bs_curry")._1(e,d)},i=h._("\u1ea3nh");if(f===void 0)return j.jsx(b("Link.react"),{"aria-label":i,className:c,onClick:g,role:"button"});a=a?j.jsx("div",{className:"_3603 _64ks"}):null;return j.jsx(b("Link.react"),{"aria-label":i,className:c,href:f,onClick:g,children:j.jsx(b("CssBackgroundImage.react"),{className:c,imageURI:f,backgroundPosition:"center",style:k,children:a})})}c=a;f.style100pct=k;f.make=c}),null);
__d("MessengerSharedPhotoReact.re",["MessengerSharedPhotoReact.bs"],(function(a,b,c,d,e,f){a=b("MessengerSharedPhotoReact.bs").make;f.make=a}),null);
__d("PhotoRendererProjection",[],(function(a,b,c,d,e,f){a=Object.freeze({PERSPECTIVE:"perspective",STEREOGRAPHIC:"stereographic",CYLINDRICAL:"cylindrical",EQUIRECTANGULAR:"equirectangular"});f["default"]=a}),66);
__d("PhotosphereMetadata",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f,g){"use strict";a=d("ImmutableRecordWithV4Types").Record({CroppedAreaImageHeightPixels:0,CroppedAreaImageWidthPixels:0,CroppedAreaLeftPixels:0,CroppedAreaTopPixels:0,FullPanoHeightPixels:0,FullPanoWidthPixels:0,InitialViewHeadingDegrees:0,InitialViewPitchDegrees:0,InitialViewRollDegrees:0,InitialViewVerticalFOVDegrees:0,PoseHeadingDegrees:0,PosePitchDegrees:0,PoseRollDegrees:0,PreProcessCropLeftPixels:0,PreProcessCropRightPixels:0,ProjectionType:"equirectangular",RendererProjectionType:"equirectangular"});g.makePhotosphereMetadata=a}),98);
__d("SphericalPhotoUtils",["PhotoRendererProjection","PhotosphereMetadata","SphericalPhotoPartialLimits"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{CroppedAreaImageHeightPixels:a.cropped_area_image_height_pixels!=null?a.cropped_area_image_height_pixels.toString():null,CroppedAreaImageWidthPixels:a.cropped_area_image_width_pixels!=null?a.cropped_area_image_width_pixels.toString():null,CroppedAreaLeftPixels:a.cropped_area_left_pixels!=null?a.cropped_area_left_pixels.toString():null,CroppedAreaTopPixels:a.cropped_area_top_pixels!=null?a.cropped_area_top_pixels.toString():null,FullPanoHeightPixels:a.full_pano_height_pixels!=null?a.full_pano_height_pixels.toString():null,FullPanoWidthPixels:a.full_pano_width_pixels!=null?a.full_pano_width_pixels.toString():null,InitialViewHeadingDegrees:a.initial_view_heading_degrees!=null?a.initial_view_heading_degrees.toString():null,InitialViewPitchDegrees:a.initial_view_pitch_degrees!=null?a.initial_view_pitch_degrees.toString():null,InitialViewRollDegrees:a.initial_view_roll_degrees!=null?a.initial_view_roll_degrees.toString():null,InitialViewVerticalFOVDegrees:a.initial_view_vertical_fov_degrees!=null?a.initial_view_vertical_fov_degrees.toString():null,PoseHeadingDegrees:a.pose_heading_degrees!=null?a.pose_heading_degrees.toString():null,PosePitchDegrees:a.pose_pitch_degrees!=null?a.pose_pitch_degrees.toString():null,PoseRollDegrees:a.pose_roll_degrees!=null?a.pose_roll_degrees.toString():null,PreProcessCropLeftPixels:null,PreProcessCropRightPixels:null,ProjectionType:a.projection_type,RendererProjectionType:c("PhotoRendererProjection").PERSPECTIVE}}function b(a){var b=a.FullPanoHeightPixels,c=a.FullPanoWidthPixels,e=a.CroppedAreaImageWidthPixels,f=a.CroppedAreaImageHeightPixels,g=a.CroppedAreaLeftPixels;a=a.CroppedAreaTopPixels;b=h(b);c=h(c);e=h(e);f=h(f);g=h(g);a=h(a);var i,j,k,l;if(e!==0&&e!==c){e=360*e/c;e<350&&(i=180*(1-2*g/c),j=e-i)}f!==0&&f!==b&&(a!==0&&(k=90*(1-2*a/b)),a+f!==b&&(l=180*(a+f-b/2)/b));g=null;c=null;e=null;a=null;k&&k<87.5&&(c=k);l&&l<87.5&&(g=l);i&&(e=i);j&&(a=j);return d("SphericalPhotoPartialLimits").makePartialLimits({partialTopDegrees:c,partialBottomDegrees:g,partialLeftDegrees:e,partialRightDegrees:a})}function h(a){return a?Number(a):0}function e(a){a=a.find(function(a){return a.projection_type===c("PhotoRendererProjection").PERSPECTIVE});var b=null,d=null;if(a&&a.thumbnails&&a.thumbnails.length>0){a=a.thumbnails;b=a[0]?a[0].uri:null;d=a[1]?a[1].uri:null}return{smallThumbnail:b,largeThumbnail:d}}function f(a){var b={};Object.keys(a).forEach(function(c){switch(c){case"ProjectionType":b.ProjectionType=a.ProjectionType;break;case"RendererProjectionType":b.RendererProjectionType=a.RendererProjectionType;break;default:b[c]=parseInt(a[c],10)}});return d("PhotosphereMetadata").makePhotosphereMetadata(b)}g.getMetadataFromGraphQLResult=a;g.calculatePartialLimits=b;g.parseNumber=h;g.getThumbnailsFromPhotoEncodings=e;g.photosphereMetadataStringToNumber=f}),98);
__d("ChatPhotoViewFooterHScroll.react",["cx","Animation","MessengerSharedPhotoReact.re","SphericalPhotoUtils","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=200,k=74,l=140,m=30;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.state={currentPhoto:"",prevScrollLeft:0,scrollLeft:0},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.props.width&&this.props.updateNumberInOneBatch(this.$2(this.props.width)),this.$1=new(c("Animation"))(this.refs.childContainer).to("scrollLeft",0).duration(j).go()};e.UNSAFE_componentWillReceiveProps=function(a){if(a.photoID!=this.state.currentPhoto||this.props.sharedPhotos.length!==a.sharedPhotos.length){var b=a.width?(a.width-k)/2-l:0,c=a.sharedPhotos.findIndex(function(b){return b.node.id===a.photoID});this.setState({currentPhoto:a.photoID,prevScrollLeft:this.state.scrollLeft,scrollLeft:c*k-b})}a.width!=this.props.width&&this.props.updateNumberInOneBatch(this.$2(a.width))};e.componentDidUpdate=function(){this.$1&&this.$1.from("scrollLeft",this.state.prevScrollLeft).to("scrollLeft",this.state.scrollLeft).duration(j).go()};e.componentWillUnmount=function(){this.$1&&this.$1.stop()};e.shouldComponentUpdate=function(a,b){return a.photoID!=this.state.currentPhoto||a.sharedPhotos.length!==this.props.sharedPhotos.length?!0:!1};e.render=function(){var a=this,b=this.props.sharedPhotos;b=b.map(function(b){var c,e=b.node.photo_encodings?b.node.photo_encodings.length!==0:!1;c=(c=b)!=null?(c=c.node)!=null?(c=c.image1)!=null?c.uri:c:c:c;if(e){var f=d("SphericalPhotoUtils").getThumbnailsFromPhotoEncodings(b.node.photo_encodings);f=f.smallThumbnail;c=f||c}return!c?null:i.jsx("div",{className:"_1oyb",children:i.jsx(d("MessengerSharedPhotoReact.re").make,{className:"_1oyc"+(a.state.currentPhoto!==b.node.id?" _1oyd":""),fbid:b.node.legacy_attachment_id,onClick:a.props.onScroll,uri:c,isSpherical:e})},b.node.legacy_attachment_id)});return i.jsx("div",{className:"_1oye",children:i.jsx("div",{className:"_1oyf",ref:"childContainer",children:i.jsx("div",{className:"_1oyh",ref:"scrollable",children:b})})})};e.$2=function(a){return a?Math.ceil((a-l*2)/k):m};return b}(i.Component);a.propTypes={onScroll:c("prop-types").func,photoID:c("prop-types").string,sharedPhotos:c("prop-types").array,updateNumberInOneBatch:c("prop-types").func,width:c("prop-types").number};g["default"]=a}),98);
__d("XForwardingNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/forwarding_nux_seen/",{})}),null);
__d("MessagingForwardingButtonNUX.react",["AsyncRequest","ChatConfig","XForwardingNUXSeenController","XUIAmbientNUX.react","prop-types","react"],(function(a,b,c,d,e,f,g){var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={showNUX:!d("ChatConfig").get("seen_forwarding_nux")},e.$1=function(){if(!e.state.showNUX)return;d("ChatConfig").set("seen_forwarding_nux",!0);new(c("AsyncRequest"))(c("XForwardingNUXSeenController").getURIBuilder().getURI()).send();e.setState({showNUX:!1})},e.close=function(){e.$1()},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.render=function(){return h.jsx(c("XUIAmbientNUX.react"),{contextRef:this.props.contextRef,onCloseButtonClick:this.$1,position:"left",width:"auto",shown:this.state.showNUX,children:this.props.children})};return b}(h.Component);a.propTypes={contextRef:c("prop-types").func.isRequired};g["default"]=a}),98);
__d("MessengerPhotoViewCloseLinkReact.bs",["cx","fbt","TooltipLink.react","bs_curry","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react");function a(a){var c=a.onClick;a=j.jsx("span",{children:h._("Nh\u1ea5n Esc \u0111\u1ec3 \u0111\u00f3ng")});return j.jsx(b("TooltipLink.react"),{children:j.jsx("div",{className:"_387s"}),className:"_51ok _50-m _51an",onClick:function(a){return b("bs_curry")._1(c,void 0)},tooltip:a})}c=a;f.make=c}),null);
__d("MessengerPhotoViewCloseLinkReact.re",["MessengerPhotoViewCloseLinkReact.bs"],(function(a,b,c,d,e,f){a=b("MessengerPhotoViewCloseLinkReact.bs").make;f.make=a}),null);
__d("SpotlightViewerBottomBarLink",["cx","Link.react","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props.className||"_4_8j _4_8k";return i.jsx(c("Link.react"),babelHelpers["extends"]({},this.props,{className:a,children:this.props.children}))};return b}(i.Component);g["default"]=a}),98);
__d("ChatPhotoViewHeader.react",["cx","fbt","CurrentUser","MessagingForwardingButtonNUX.react","MessengerPhotoViewCloseLinkReact.re","SpotlightViewerBottomBarLink","prop-types","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){c.$2(),c.props.showForwardDialog&&c.props.showForwardDialog()},c.$4=function(){c.$2(),c.props.showShareDialog&&c.props.showShareDialog()},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){return j.jsxs("div",{className:"_51an _50-m _3h_t _5l-3",role:"banner",children:[this.$1(),j.jsx(d("MessengerPhotoViewCloseLinkReact.re").make,{onClick:this.props.onClose})]})};e.$2=function(){this.refs.forwardNUX&&this.refs.forwardNUX.close()};e.$1=function(){var a=this,b,d,e;this.props.disableForward||(b=j.jsxs(c("SpotlightViewerBottomBarLink"),{className:"_3h_u",onClick:this.$3,ref:"forwardButton",children:[j.jsx("div",{className:"_3h_v _3h_w"}),i._("Chuy\u1ec3n ti\u1ebfp")]}),d=j.jsx(c("MessagingForwardingButtonNUX.react"),{contextRef:function(){return a.refs.forwardButton},ref:"forwardNUX",children:i._("G\u1eedi h\u00ecnh \u1ea3nh n\u00e0y cho ng\u01b0\u1eddi kh\u00e1c b\u1eb1ng tin nh\u1eafn ri\u00eang.")}));this.props.enableShareToFB&&(e=j.jsxs("div",{className:"_3h_u",onClick:this.$4,ref:"shareButton",role:"button",tabIndex:"0",children:[j.jsx("div",{className:"_3tth _3h_w"}),this.$5()]}));return j.jsxs("div",{ref:"buttons",children:[j.jsxs(c("SpotlightViewerBottomBarLink"),{className:"_3h_u",rel:"async",ajaxify:this.props.url,ref:"downloadButton",children:[j.jsx("div",{className:"_3h_x _3h_w"}),i._("T\u1ea3i xu\u1ed1ng")]}),b,d,e,j.jsxs("div",{className:"_3h_u",onClick:this.props.openInfo,ref:"moreInfo",role:"link",tabIndex:"0",children:[j.jsx("div",{className:"_3h_y _3h_w"}),i._("Th\u00f4ng tin")]})]},"buttonsContainer")};e.$5=function(){if(c("CurrentUser").isWorkUser())return i._("Chia s\u1ebb l\u00ean Workplace");else return i._("Chia s\u1ebb l\u00ean Facebook")};return b}(j.PureComponent);a.propTypes={disableForward:c("prop-types").bool,enableShareToFB:c("prop-types").bool,onClose:c("prop-types").func,openInfo:c("prop-types").func,showForwardDialog:c("prop-types").func,showShareDialog:c("prop-types").func,url:c("prop-types").object};g["default"]=a}),98);
__d("XMessagingVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1}})}),null);
__d("MessengerVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessengerSpinner.react","ShimButton.react","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","Vector","VideoPlayerReasonTransitionHelper","XMessagingVideoAttachmentController","cssURL","getFullScreenElement","guid","joinClasses","prop-types","react","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j="_ox1",k="_27db";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d,e;e=a.call(this,b)||this;e.$2=!0;e.$3=[];e.$4=-1;e.$5=!1;e.$6=!1;e.state={playerAPI:null,forcePause:!!((d=e.props.videoData)==null?void 0:d.disableAutoplay),loaded:!1};e.$10=function(a){if(e.isVideoControlClicked(a)){a.preventDefault();a.stopPropagation();return}if(!e.isVideoClicked(a))return;a.preventDefault();e.props.isOnStage?(a.stopPropagation(),e.isState("playing")?e.pause("user_initiated"):e.play("user_initiated")):(e.pause("user_initiated"),e.props.onClick&&e.props.onClick())};e.$11=function(a){if(!e.isRightClick(a))return;a.stopPropagation();a.preventDefault();c("setImmediate")(function(){e.props.onSelect&&e.props.onSelect()})};e.$8=function(){if(!e.$2||e.state.forcePause)return;e.$6&&(e.play(new(c("VideoPlayerReasonTransitionHelper"))("page_visibility_initiated")),e.$6=!1)};e.$7=function(){if(!e.$2||e.state.forcePause||!(e.state.playerAPI&&e.state.playerAPI.isMuted()))return;e.$6=!!e.state.playerAPI&&e.state.playerAPI.isState("playing");e.pause()};e.onVideoLoaded=function(){if(!e.$2)return;e.state.playerAPI&&e.state.playerAPI.addListener("stateChange",function(){return e.$12()});e.props.isVisible&&!e.$5&&!e.state.forcePause?e.play("autoplay_initiated"):e.pause();e.$4=-1;e.$5=!1};e.$1=c("guid")();e.$2=!((d=b.videoData)==null?void 0:d.disableAutoplay);e.props.isInThread&&(e.listeners=new(c("SubscriptionsHandler"))(),e.listeners.addSubscriptions(c("Event").listen(window,"blur",e.$7),c("Event").listen(window,"focus",e.$8)));return e}var e=b.prototype;e.shouldComponentUpdate=function(a){var b=document.getElementById(this.$1.toString()),d=c("FullScreen").isFullScreen();if(b!=null&&d&&b.children[0].children[0]===c("getFullScreenElement")())return!1;d=!!(a.stageDimensions&&a.stageDimensions!==this.props.stageDimensions);d&&(this.$4=this.getCurrentTimePosition(),this.$5=!this.isState("playing"));return!this.props.videoData||a.videoData.id!==this.props.videoData.id||d};e.UNSAFE_componentWillReceiveProps=function(a){if(!this.$2)return;this.props.isInThread&&a.isVisible!==this.props.isVisible&&(a.isVisible&&!this.state.forcePause?this.play(new(c("VideoPlayerReasonTransitionHelper"))("video_visibility_initiated")):this.pause())};e.componentDidMount=function(){this.props.videoData&&this.$9()};e.componentDidUpdate=function(){this.$3.forEach(function(a){return a.abandon()}),this.$3=[],this.props.videoData&&this.$9()};e.componentWillUnmount=function(){this.pause("unloaded"),this.seek(0),this.$3.forEach(function(a){return a.abandon()}),this.listeners&&this.listeners.release(),this.state.playerAPI&&this.state.playerAPI.detachRootNode(),this.state.playerAPI&&this.state.playerAPI.destroy&&this.state.playerAPI.destroy()};e.isVideoLoaded=function(){var a=!!this.state.playerAPI;!a;return this.isState("fallback")?!1:a};e.isVideoClicked=function(a){return a.target instanceof HTMLElement?a.target.classList.contains(j):!1};e.isVideoControlClicked=function(a){var b=document.getElementsByClassName(k);for(var c=0;c<b.length;c++){var d=a.target;if(b[c].contains(d))return!0}return!1};e.isRightClick=function(a){a=a||window.event;return a.button===2};e.play=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.play(a)};e.pause=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.pause(a)};e.seek=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.seek(a)};e.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};e.render=function(){var a=this.props.videoData,b=i.jsx("div",{ref:"placeholder",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").large_size})}),d={};if(a&&a.url){var e=a.original_dimensions;d.backgroundImage=this.state.loaded?c("cssURL")(a.url):"none";b=i.jsx("div",{ref:"placeholder",children:i.jsx(c("BackgroundImage.react"),{className:this.props.className,width:e.x,height:e.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:d,src:a.url})})}return i.jsx(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_4-od"),id:this.$1,onClick:this.$10,onMouseDown:this.$11,style:d,children:b})};e.$9=function(){var a=this,b=this.props.videoData;if(b){var e=b.original_dimensions;this.props.stageDimensions&&(e=c("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(c("Vector"))(b.original_dimensions.x,b.original_dimensions.y),this.props.stageDimensions));e=c("XMessagingVideoAttachmentController").getURIBuilder().setString("video_id",b.legacy_attachment_id).setString("video_container_id",this.$1).setInt("width",e.x).setInt("height",e.y).setInt("start_timestamp",this.$4>0?Math.round(this.$4):0).setBool("start_muted",b.start_muted).setBool("no_fullscreen",b.no_fullscreen).setBool("load_player_controller",!0).setBool("hide_controls_on_finish",b.hide_controls_on_finish).setBool("native_thumbnail",b.disableAutoplay).setBool("hide_url_menu_option",Boolean(b.hide_url_menu_option)).setBool("is_share",b.is_share).setBool("render_play_button",this.props.isInThread).getURI();b=this.props.attachment;b&&b.metadata&&b.metadata.pageid&&(e=d("ActorURI").create(e,b.metadata.pageid));var f=new(c("AsyncRequest"))();this.$3.push(f);f.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(e).setRelativeTo(this).setReadOnly(!0).setHandler(function(b){a.$3=a.$3.filter(function(a){return a!==f})}).send()}};e.$12=function(){this.props.isVisible&&this.isState("finished")?(this.seek(0),this.play("loop_initiated")):this.props.isVisible&&this.isState("paused")&&!this.$6?this.setState({forcePause:!0}):this.isState("playing")&&this.setState({forcePause:!1})};e.isState=function(a){return!!(this.state.playerAPI&&this.state.playerAPI.isState(a))};return b}(i.Component);a.propTypes={attachment:c("prop-types").object,className:c("prop-types").string,isInThread:c("prop-types").bool,isVisible:c("prop-types").bool,isOnStage:c("prop-types").bool,stageDimensions:c("prop-types").instanceOf(c("Vector")),videoData:c("prop-types").object,onClick:c("prop-types").func,onSelect:c("prop-types").func};a.invokeVideoLoaded=function(a,b,c){a.$2=c,b.setAllowCrossPageTransition(!0),b.isState("loading")?a.stateChangeListener=b.addListener("stateChange",function(){if(!b.isState("loading")){if(a.state&&a.state.playerAPI)return;a.setState({playerAPI:b},a.onVideoLoaded);a.stateChangeListener&&a.stateChangeListener.remove()}}):a.setState({playerAPI:b,loaded:!0},a.onVideoLoaded)};g["default"]=a}),98);
__d("MessagingForwardAttachmentDialog.react",["BootloadOnRender.react","JSResource","LazyComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return h.jsx(c("BootloadOnRender.react"),{component:h.jsx(c("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:c("JSResource")("MessagingForwardAttachmentDialogImpl.react").__setRef("MessagingForwardAttachmentDialog.react"),placeholder:h.jsx("div",{})})};return b}(h.PureComponent);g["default"]=a}),98);
__d("MessengerThreadSharedMediaAfterWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1668947383157276"};b.getQueryID=function(){return"515216185516880"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaBeforeWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1712143858865110"};b.getQueryID=function(){return"1694317194012102"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerThreadSharedMediaFindWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1933185426727404"};b.getQueryID=function(){return"237087923629184"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("SpotlightMessagesViewerPagers.react",["cx","fbt","LeftRight.react","Link.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){return j.jsxs(c("LeftRight.react"),{children:[j.jsx(c("Link.react"),{"aria-disabled":a.disablePrevArrow,"aria-label":i._("Tr\u01b0\u1edbc"),className:"_322u"+(a.disablePrevArrow?"":" _2bbb")+" _50-m",children:j.jsx("div",{className:(a.disablePrevArrow?"":"_4ksl")+(a.disablePrevArrow?"":" _4ksm")})}),j.jsx(c("Link.react"),{"aria-disabled":a.disableNextArrow,"aria-label":i._("Ti\u1ebfp"),className:"_322u"+(a.disableNextArrow?"":" _2bbc")+" _50-m",children:j.jsx("div",{className:(a.disableNextArrow?"":"_4ksl")+(a.disableNextArrow?"":" _4kso")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XMessagingPhotoDownloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/photo/",{photo_id:{type:"String",required:!0}})}),null);
__d("XMessagingShareAttachmentDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/attachments/share/dialog/",{__asyncDialog:{type:"Int"},privacy_mutation_token:{type:"String"}})}),null);
__d("SpotlightMercurySharedMediaViewer.react",["csx","cx","fbt","invariant","ActorURI","AsyncDialog","AsyncRequest","BootloadedComponent.react","ChatPhotoViewFooterHScroll.react","ChatPhotoViewHeader.react","Event","FunnelLogger","JSResource","KeyEventController","MessagingForwardAttachmentDialog.react","MessengerThreadSharedMediaHelper","MessengerVideoPlayer.react","Parent","PhotoUtils","SpotlightMessagesViewerPagers.react","SpotlightViewer","SpotlightViewerImage","SpotlightViewport","SubscriptionsHandler","Vector","XMessagingPhotoDownloadController","XMessagingShareAttachmentDialogController","lazyLoadComponent","prop-types","react"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=d("react"),m=88,n=30,o="WWW_MESSENGER_SHARE_TO_FB_FUNNEL",p="_4-og";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.$1=void 0,e.$2=[],e.state={hasPrevPage:!1,hasNextPage:!1,firstPhotoLoaded:!1,isLoading:!1,mediaData:[],numberInOneBatch:n,photoData:null,showForward:!1,showInfo:!1,stageDimensions:new(c("Vector"))()},e.$11=function(){return!e.state.photoData?null:l.jsx(c("ChatPhotoViewFooterHScroll.react"),{onScroll:e.$18,photoID:e.state.photoData.node.id,sharedPhotos:e.state.mediaData,updateNumberInOneBatch:e.$19,width:e.state.stageDimensions.x})},e.$19=function(a){e.setState({numberInOneBatch:a})},e.$18=function(a){if(!e.state.mediaData||e.state.isLoading)return;var b=e.state.mediaData.findIndex(function(b){return b.node.legacy_attachment_id===a});if(b<0)return;var c=e.state.mediaData[b];e.setState({photoData:c});e.$22(b)},e.$5=function(a,b){if(e.state.photoData==null||e.state.isLoading)return;if(b&&!!d("Parent").bySelector(b.target,"._170l"))return;b&&b.target instanceof HTMLElement&&b.target.className===p&&e.$10();b=e.state.mediaData.findIndex(function(a){e.state.photoData!=null||k(0,1033);return a.node.legacy_attachment_id===e.state.photoData.node.legacy_attachment_id});if(b<0||b===e.state.mediaData.length-1&&!e.state.hasNextPage&&a)return;if(b===0&&!a){e.setState({isLoading:!0},function(){return e.$7(e.state.photoData,1,function(b){if(b===0)return;e.$5(a)})});return}var c=a?e.state.mediaData[b+1]:e.state.mediaData[b-1];e.setState({photoData:c});e.$22(b)},e.$10=function(){if(e.props.photoID===null)return;e.setState({photoData:null});e.props.onClosePhotoView()},e.$16=function(){e.setState({showForward:!0})},e.$20=function(){e.setState({showForward:!1})},e.$15=function(){e.setState({showInfo:!0})},e.$21=function(){e.setState({showInfo:!1})},e.$17=function(){e.setState({showForward:!1,showInfo:!1});d("FunnelLogger").appendAction(o,"click");var a=e.state.photoData;if(!e.$14()||!(a&&a.node))return;a=a.node.legacy_attachment_id;var b=c("XMessagingShareAttachmentDialogController").getURIBuilder().getURI();b=new(c("AsyncRequest"))(b).setData({attachment_id:a}).setMethod("POST");d("AsyncDialog").send(b)},e.$23=function(a,b,c){var d=Object.keys(a)[0];a=a[d].message_shared_media;d=a.page_info;var f=a.edges.length;if(f!==0){var g=e.state.mediaData;switch(b){case 0:e.setState({photoData:a.edges[0],mediaData:[a.edges[0]],firstPhotoLoaded:!0});break;case 1:g=g.concat(a.edges);e.setState({hasNextPage:d.has_next_page,mediaData:g});break;case-1:g=a.edges;g=g.concat(e.state.mediaData);e.setState({mediaData:g,hasPrevPage:d.has_previous_page});break}}e.setState({isLoading:!1});c(f)},e.$3=function(){var a=new(c("Vector"))(c("Vector").getViewportDimensions().x,c("Vector").getViewportDimensions().y-m);return a},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.getDefaultProps=function(){return{enableShareToFB:!1}};e.componentDidMount=function(){var a=this;this.setState({isLoading:!0,stageDimensions:this.$3()},function(){return a.$4(a.props.photoID)});this.$1=new(c("SubscriptionsHandler"))();this.$1.addSubscriptions(c("Event").listen(window,"resize",function(){a.setState({stageDimensions:a.$3()})}),c("KeyEventController").registerKey("LEFT",function(){a.$5(!1);return!1}),c("KeyEventController").registerKey("RIGHT",function(){a.$5(!0);return!1}));this.props.enableShareToFB&&d("FunnelLogger").startFunnel(o)};e.UNSAFE_componentWillUpdate=function(a,b){var c=this;b.firstPhotoLoaded!==this.state.firstPhotoLoaded&&this.setState({isLoading:!0},function(){c.$6(b.photoData,b.numberInOneBatch,function(){}),c.$7(b.photoData,b.numberInOneBatch,function(){})});b.numberInOneBatch!=this.state.numberInOneBatch&&!b.isLoading&&this.setState({isLoading:!0},function(){return c.$6(b.mediaData[b.mediaData.length-1],b.numberInOneBatch,function(){})})};e.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null,this.$2.forEach(function(a){return a.abandon()})};e.render=function(){var a=this,b=this.$8(),d=this.state.stageDimensions,e=this.state.isLoading||this.props.useloadingindicator&&!this.state.photoData;if(this.state.photoData==null)return null;var f=this.state.mediaData.findIndex(function(b){a.state.photoData!=null||k(0,1033);return b.node.id===a.state.photoData.node.id});f=l.jsxs("div",{children:[this.$9(),this.props.disablepaging?null:l.jsx(c("SpotlightMessagesViewerPagers.react"),{disablePrevArrow:f<=0&&!this.state.hasPrevPage,disableNextArrow:!this.state.hasNextPage&&f>=this.state.mediaData.length-1})]});return l.jsxs("span",{children:[l.jsxs(c("SpotlightViewer"),{className:"_53vs",onHide:this.$10,open:this.props.photoID!==null,ref:"spotlightViewer",rootClassName:this.props.rootClassName,children:[l.jsx(c("SpotlightViewport"),{active:!1,fadeInNOut:!0,media:b,onClick:this.$5,ref:"viewport",showLoadingIndicator:e,stageDimensions:d,useWidth:!0,children:f}),this.$11()]}),this.$12(),this.$13()]})};e.$9=function(){if(!this.state.photoData)return null;var a=this.state.photoData;a=a.node.legacy_attachment_id;a=c("XMessagingPhotoDownloadController").getURIBuilder().setString("photo_id",a).getURI();this.props.actorid&&(a=d("ActorURI").create(a,this.props.actorid));return l.jsx(c("ChatPhotoViewHeader.react"),{disableForward:this.props.disableForward,enableShareToFB:this.$14(),onClose:this.$10,openInfo:this.$15,ref:"photoviewheader",showForwardDialog:this.$16,showShareDialog:this.$17,url:a})};e.$12=function(){if(!this.state.photoData||!this.state.showForward)return null;var a=j._("Chuy\u1ec3n ti\u1ebfp");return l.jsx(c("MessagingForwardAttachmentDialog.react"),{attachmentID:this.state.photoData.node.legacy_attachment_id,onClose:this.$20,shown:this.state.showForward,title:a})};e.$13=function(){return this.state.showInfo?l.jsx(l.Suspense,{fallback:l.jsx("div",{}),children:l.jsx(q,{closeInfo:this.$21,infoOpen:this.state.showInfo,photoID:this.state.photoData.node.id})}):l.jsx("xhp",{})};e.$14=function(){var a=this.state.photoData;return!a?!1:!!this.props.enableShareToFB&&a.node.__typename==="MessageImage"&&a.node.image1.uri.indexOf(".gif")<0};e.$22=function(a){var b=this,c=this.state.numberInOneBatch,d=this.state.mediaData;a<=c/2?this.setState({isLoading:!0},function(){return b.$7(d[0],c,function(){})}):a>=d.length-c/2&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){return b.$6(d[d.length-1],c,function(){})})};e.$4=function(a){var b=this;a=d("MessengerThreadSharedMediaHelper").search(this.props.threadID,String(a),function(a){return b.$23(a,0,function(){})});this.$2.push(a)};e.$6=function(a,b,c){var e=this;a=d("MessengerThreadSharedMediaHelper").loadMorePrevious(this.props.threadID,a.cursor,b||1,function(a){return e.$23(a,1,c)});this.$2.push(a)};e.$7=function(a,b,c){var e=this;a=a?a.cursor:null;a=d("MessengerThreadSharedMediaHelper").loadMoreLatest(this.props.threadID,a,b||1,function(a){return e.$23(a,-1,c)});this.$2.push(a)};e.$8=function(){if(this.state.photoData&&this.state.photoData.node){var a=this.state.photoData.node;if(a.__typename&&a.__typename==="MessageVideo")return this.$24();var d=this.state.stageDimensions,e=this.$25(a,d);if(!e)return null;if(a.photo_encodings&&a.photo_encodings.length!==0)return this.$26(a.legacy_attachment_id,e,a.photo_encodings,d);a=b.getImageDimensionsForStage(new(c("Vector"))(e.width,e.height),d);return this.$27(e,a)}else return null};e.$24=function(){return this.state.photoData?l.jsx(c("MessengerVideoPlayer.react"),{isOnStage:!0,isVisible:!0,videoData:this.state.photoData.node,stageDimensions:this.state.stageDimensions}):null};e.$27=function(a,b){return l.jsx(c("SpotlightViewerImage"),{dimensions:b,ref:"image",src:a.uri})};e.$26=function(a,b,d,e){return l.jsx(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("SpotlightViewerSphericalPhoto.react").__setRef("SpotlightMercurySharedMediaViewer.react"),bootloadPlaceholder:l.jsx("div",{}),height:e.y,width:e.x,fbid:a,thumbnail:b.uri,photoEncodings:d,stageDimensions:this.state.stageDimensions})};e.$25=function(a,b){var e=null;a=d("PhotoUtils").getImagesFromData(a);a=a.sort(function(a,b){return a.width==null?b.width==null?0:1:b.width==null?-1:b.width-a.width});window.devicePixelRatio&&window.devicePixelRatio>1&&(b=new(c("Vector"))(b.x*window.devicePixelRatio,b.y*window.devicePixelRatio));for(var f=0;f<a.length;f++)(!e||a[f].width>=b.x||a[f].height>=b.y)&&(e=a[f]);return e};return b}(l.Component);a.propTypes={disableForward:c("prop-types").bool,enableShareToFB:c("prop-types").bool,onClosePhotoView:c("prop-types").func,photoID:c("prop-types").string,rootClassName:c("prop-types").string,threadID:c("prop-types").string};a.getImageDimensionsForStage=function(a,b){var d=a.x;a=a.y;var e=b.x;b=b.y;var f=d/a,g=e/b;d>=e||a>=b?g<f?(d=e,a=Math.round(e/f)):g>f?(d=Math.round(b*f),a=b):(d=e,a=b):f<g?d=Math.round(a*f):a=Math.round(d/f);return new(c("Vector"))(d,a)};var q=c("lazyLoadComponent")(c("JSResource")("MessengerPhotoInfoDialogContainer.react").__setRef("SpotlightMercurySharedMediaViewer.react"));g["default"]=a}),98);
__d("MessengerScrollableArea.react",["cx","ReactDOM","ScrollableArea.react","Style","UserAgent","clearImmediate","gkx","joinClasses","react","setImmediate","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=20,k=c("gkx")("1094116");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this,b)||this;e.$1=!1;e.$2=null;e.$5=function(){if(e.$1){var a;e.props.onScroll&&(a=e.props).onScroll.apply(a,arguments)}};e.$6=function(){if(!c("UserAgent").isBrowser("IE"))return;if(k)return;if(!e.refs||!e.$4.current)return;var a=e.$4.current.refs.wrap,b=e.$4.current.refs.body;if(!b||!a)return;b=d("ReactDOM").findDOMNode(b);a=d("ReactDOM").findDOMNode(a);a=a.offsetWidth-a.clientWidth;a>0&&c("Style").set(b,"margin-right",-a+"px")};e.$3=c("throttle")(e.$5,50);e.$4=i.createRef();return e}var e=b.prototype;e.componentDidMount=function(){this.$2=c("setImmediate")(this.$6),this.$1=!0};e.componentWillUnmount=function(){c("clearImmediate")(this.$2),this.$1=!1};e.render=function(){var a=this.props.needsFastScrollHandler?this.$5:this.$3;return i.jsx(c("ScrollableArea.react"),{className:c("joinClasses")("_5f0v",this.props.className),height:this.props.height,onClick:this.props.onClick,onScroll:a,persistent:!0,ref:this.$4,shadow:!1,tabIndex:this.props.tabIndex,width:this.props.width,children:this.props.children})};e.getArea=function(){if(this.$4.current)return this.$4.current.getArea()};e.scrollToBottom=function(a){var b=this.getArea();b&&this.scrollToPosition(b.getScrollHeight(),!!a)};e.scrollToTop=function(a){var b=this.getArea();b&&b.scrollToTop(!!a)};e.scrollToPosition=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c={});var d=this.getArea();if(!d)return;d.setScrollTop(a,b,c)};e.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0)};e.isScrolledToBottomWithHeight=function(a){var b=this.getArea();return!b?!1:b.getScrollTop()+b.getClientHeight()+a>=b.getScrollHeight()-j};e.isScrolledToTop=function(){var a=this.getArea();return!a?!0:a.getScrollTop()<=j};e.getScrollTop=function(){var a=this.getArea();return!a?0:a.getScrollTop()};return b}(i.Component);g["default"]=a}),98);
__d("WorkChatRedesignedMessageListCheck.bs",["CurrentUser","MessengerEnvironment","gkx"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("895574")&&b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.enabled=a}),null);
__d("MessengerDateBreak.bs",["cx","FBLogger","WorkChatRedesignedMessageListCheck.bs","formatDate","joinClasses","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.date;a=a.className;a=a!==void 0?a:"";try{var d={today:"g:ia",thisYear:"M jS, g:ia",withinWeek:"D g:ia",older:"m/d/Y g:ia",future:"g:ia"};c=b("formatDate")(c,d);return i.jsx("h4",{className:b("joinClasses")(a,"_497p"+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w78":"")+" _2lpt"),children:i.jsx("time",{className:"_3oh-",children:c})})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: Js.Date.getTime(date)");return null}}c=i.memo(a,function(a,b){return a.date.getTime()===b.date.getTime()});f.make=c}),null);
__d("MessengerDateBreak.re",["MessengerDateBreak.bs"],(function(a,b,c,d,e,f){a=b("MessengerDateBreak.bs").make;f.make=a}),null);
__d("MessengerDeliveryReceipt.bs",["bs_belt_MapString","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(a,c),0)}c=b("bs_belt_Option").getWithDefault;f.$pipe$question=c;f.getDeliveryTimeOfThread=a}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","FBEmojiResource","Image.react","MessengerHotlikeEmoji.bs","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a="_1ift _1ifu",b=0,e=this.props.contents.map(function(e){b++;var f=e.emojiKey;if(f){f=d("MessengerHotlikeEmoji.bs").isMessengerHotlike(f)?d("EmojiImageURL").getMessengerURL(f,d("EmojiLikeConstants").sizeMap.dp32):new(c("FBEmojiResource"))(f).getImageURL(d("EmojiLikeConstants").sizeMap.dp32);return i.jsx(c("Image.react"),{alt:e.text,className:a,src:f},b)}else return i.jsx("span",{children:e.text},b)});return i.jsx("div",{tabIndex:"0",children:e})};return b}(i.Component);a.propTypes={contents:c("prop-types").arrayOf(c("prop-types").shape({emojiKey:c("prop-types").string,text:c("prop-types").string.isRequired})).isRequired};g["default"]=a}),98);
__d("LinkCTAXMATAsyncLink.react",["AsyncRequest","FDSLink.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){new(c("AsyncRequest"))().setURI(d.props.uri).setMethod("POST").send()},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){return h.jsx(c("FDSLink.react"),{onClick:this.onClick,children:this.props.text})};return b}(h.Component);g["default"]=a}),98);
__d("MessengerSupportedEmojiUtils",["cx","EmojiImageURL","EmojiLikeConstants","EmojiRenderer","EmoticonEmojiList","FBEmojiAliases","FBEmojiResource","Image.react","MessengerEmojiTransitionMapping.bs","MessengerHotlikeEmoji.bs","MessengerSupportedEmoji","SupportedEmoji3","SupportedFacebookEmoji","Utf16","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=/_fe0f/g,k=new RegExp("(\r\n|[ \r\n]|\\s)");function a(a){if(!a)return null;var b=null,e=this.parse(a);if(e.length===1&&e[0].length===a.length){a=e[0].emoji.map(function(a){return d("Utf16").decode(a)});b=a.map(function(a){return a.toString(16)}).join("_").replace(j,"")}if(b){e=c("FBEmojiAliases")[b];e&&(b=e.replace(j,""))}return this.isSupportedEmojiKey(b)?b:null}function b(a){return!!this.getSupportedEmojiKey(a)}function e(a){if(!a)return!1;if(!d("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)){var b=function(a){var b=c("FBEmojiAliases")[a];return b?b.replace(j,""):a}(a);return!!c("SupportedFacebookEmoji")[b]||!!c("SupportedEmoji3")[b]}return!!d("MessengerSupportedEmoji").emoji[a]}function f(a){return!!(a&&d("MessengerSupportedEmoji").emoji[a])}function h(a){if(!a)return null;var b=this.parse(a);if(b.length===1&&b[0].length===a.length){a=b[0].emoji.map(function(a){return d("Utf16").decode(a)});b=a.map(function(a){return a.toString(16)}).join("_").replace(j,"");if(this.isSupportedEmojiKey(b))return a}return null}function l(a){a=a.map(function(a){return a.toString(16)}).join("_").replace(j,"");var b=c("FBEmojiAliases")[a];return b?b.replace(j,""):a}function m(){var a,b=d("EmojiLikeConstants").size;return a={},a[b.XSMALL]="_2560",a[b.SMALL]="_1ifu",a[b.MEDIUM]="_19_r",a[b.LARGE]="_19_s",a}function n(a){a=this.parse(a,1);if(a.length!==1)return null;var b=a[0].emoji,c=a[0].emoji.map(function(a){return d("Utf16").decode(a)});d("MessengerEmojiTransitionMapping.bs").hasGender(c)&&!d("MessengerEmojiTransitionMapping.bs").getGender(c)&&(c=d("MessengerEmojiTransitionMapping.bs").makeFemale(c));c=c.map(function(a){return a.toString(16)}).join("_").replace(j,"");return{emoji_key:c,emoji_str:b.join(""),is_supported:this.isSupportedEmojiKey(c),offset:a[0].offset,length:a[0].length}}function o(a,b){if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var e=this.getClassSizeMap();b=this.transferSize(b);d("EmojiLikeConstants").sizeMap[b]||(b=d("EmojiLikeConstants").size.XSMALL);e=c("joinClasses")(e[b],"_1ift");b=d("EmojiLikeConstants").sizeMap[b];b=d("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?d("EmojiImageURL").getMessengerURL(a,b):new(c("FBEmojiResource"))(a).getImageURL(b);return b==null?null:{emoji:i.jsx(c("Image.react"),{className:e,src:b}),emoji_key:a,url:b}}function p(a,b){if(!a)return null;a=this.getSupportedEmojiKey(a,!0);if(!a)return null;var e=this.getClassSizeMap();b=this.transferSize(b);var f=b===d("EmojiLikeConstants").size.MEDIUM?d("EmojiLikeConstants").size.LARGE:b;d("EmojiLikeConstants").sizeMap[b]||(b=d("EmojiLikeConstants").size.XSMALL);e=c("joinClasses")(e[b],"_1ift");b=d("EmojiLikeConstants").sizeMap[f];f=d("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?d("EmojiImageURL").getMessengerURL(a,b):new(c("FBEmojiResource"))(a).getImageURL(b);return f==null?null:{emoji:i.jsx(c("Image.react"),{className:e,src:f}),emoji_key:a,url:f}}function q(a,b){if(!a)return null;a=this.getSupportedEmojiKey(a);if(!a)return null;var e=this.getClassSizeMap();b=this.transferSize(b);var f=b===d("EmojiLikeConstants").size.MEDIUM?d("EmojiLikeConstants").size.LARGE:b;d("EmojiLikeConstants").sizeMap[b]||(b=d("EmojiLikeConstants").size.XSMALL);e=c("joinClasses")(e[b],"_1ift");b=d("EmojiLikeConstants").sizeMap[f];f=d("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)?d("EmojiImageURL").getMessengerURL(a,b):new(c("FBEmojiResource"))(a).getImageURL(b);return f==null?null:{emoji:i.jsx(c("Image.react"),{className:e,src:f}),emoji_key:a,url:f}}function r(a){a=a||"";var b=[],c=function(a){var c=k.exec(a),d="";while(c&&c.length&&c.index===0)d+=c[0],a=a.replace(k,""),c=k.exec(a);d.length>0&&b.push({text:d});return a};while(!0){a=c(a);var e=d("EmoticonEmojiList").noncapturingRegexp.exec(a);if(e&&e.index===0){var f=d("EmoticonEmojiList").names[e[1]];f=d("EmoticonEmojiList").emote2emojis[f];b.push({emojiKey:f,text:e[1]});a=a.replace(e[1],"")}else break}while(a.length>0&&a.trim().length>0){a=c(a);f=this.getEmojiMatchObj(a);if(f&&f.is_supported)b.push({emojiKey:f.emoji_key,text:f.emoji_str}),a=a.replace(f.emoji_str,"");else return null}return b}function s(a,b){a=a.replace(j,"");b=this.transferSize(b);if(!d("MessengerHotlikeEmoji.bs").isMessengerHotlike(a)){var e=c("FBEmojiAliases")[a];e&&(a=e.replace(j,""));return!this.isSupportedEmojiKey(a)?null:new(c("FBEmojiResource"))(a).getImageURL(d("EmojiLikeConstants").sizeMap[b])}return!d("MessengerSupportedEmoji").emoji[a]?null:d("EmojiImageURL").getMessengerURL(a,d("EmojiLikeConstants").sizeMap[b])}function t(a){return this.parse(a,1).length===1}function u(a,b){return d("EmojiRenderer").parse(a,b)}function v(a){return d("EmojiLikeConstants").sizeMapTransfer[a]||a}g.getSupportedEmojiKey=a;g.isSupportedEmoji=b;g.isSupportedEmojiKey=e;g.isMessengerSupportedEmojiKey=f;g.getSupportedEmojiCodesArray=h;g.getEmojiKeyFromCodes=l;g.getClassSizeMap=m;g.getEmojiMatchObj=n;g.getNewEmojiData=o;g.getHotLikeEmojiDataTransition=p;g.getHotLikeEmojiData=q;g.getEmojiOnlyContents=r;g.getUrl=s;g.containsEmoji=t;g.parse=u;g.transferSize=v}),98);
__d("MercuryMessageStore",["CurrentUser","LogHistory","MercuryAPIArgsSource","MercuryMessagingLightswitch","MercuryThreadInformer","MercuryThreadlistConstants","MessengerState.bs","SubscriptionsHandler","mixInEventEmitter","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=d("LogHistory").getInstance("mercury_message_store");a=function(){function a(a,b,e){var f=this;this.$5=a;this.$1=e||c("CurrentUser").getID();this.$2=1;this.$3=b||d("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT;this.$6=e?c("MercuryThreadInformer").getForFBID(e):c("MercuryThreadInformer").get();this.$4=new(c("SubscriptionsHandler"))();this.$4.addSubscriptions(this.$6.subscribe("messages-received",function(a,b){return f.$7(b)}),this.$6.subscribe("messages-updated",function(a,b){return b[f.$5]&&f.$8(b[f.$5])}),this.$6.subscribe("messages-deleted",function(a,b){return b[f.$5]&&f.$9(b[f.$5])}),this.$6.subscribe("messages-reordered",function(a,b){return b[f.$5]&&f.$10()}),this.$6.subscribe("thread-invalidated",function(a,b){return b[f.$5]&&f.$11()}));var g=this.$12();c("MercuryMessagingLightswitch").guard(function(){h.debug("constructed",JSON.stringify({threadID:f.$5,messageCount:g}))});g<this.$3?this.$13():c("setImmediate")(function(){f.$10()})}var b=a.prototype;b.destroy=function(){var a=this;this.$4&&this.$4.release();this.removeAllListeners();c("MercuryMessagingLightswitch").guard(function(){h.debug("destroyed",JSON.stringify({threadID:a.$5}))})};b.subscribe=function(a){return this.addRetroactiveListener("updated",a)};b.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$13();return!0};b.hasFetchedAll=function(){return d("MessengerState.bs").hasLoadedAllMessages(this.$1,this.$5)||d("MessengerState.bs").isNewEmptyLocalThread(this.$1,this.$5)};b.$12=function(){return d("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5).length};b.$13=function(){var a=this,b=this.$3;d("MessengerState.bs").getThreadMessagesRange(this.$1,this.$5,this.$12(),b,this.$14.bind(this),null,c("MercuryAPIArgsSource").MERCURY);this.$2<10&&(this.$2+=1);d("MessengerState.bs").hasLoadedNMessages(this.$1,this.$5,b+this.$12())&&c("setImmediate")(function(){a.$10()})};b.$14=function(b){var d=this;c("MercuryMessagingLightswitch").guard(function(){h.debug("fetch_messages",JSON.stringify({threadID:d.$5,fetchedMessagesCount:b&&b.length||0,messageCount:d.$12()}))});b&&!b.length&&!this.$12()&&this.$15(a.THREAD_IS_EMPTY)};b.$7=function(b){var c=[];b=b[this.$5];b&&b.length&&(c=c.concat(b.filter(function(a){return!!a})));c.length&&this.$15(a.MESSAGES_RECEIVED)};b.$8=function(b){this.$15(a.MESSAGES_CHANGED)};b.$9=function(b){this.$15(a.MESSAGES_DELETED,b)};b.$10=function(){this.$15(a.MESSAGES_REORDERED)};b.$11=function(){this.$2=1,this.$13()};b.$15=function(a,b){var c=d("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5);this.releaseHeldEventType("updated");this.emitAndHold("updated",{messages:c,deletedMessages:b,eventType:a})};return a}();Object.assign(a,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",MESSAGES_DELETED:"deleted",THREAD_IS_EMPTY:"thread-is-empty"});c("mixInEventEmitter")(a,{updated:!0});g["default"]=a}),98);
__d("PagesMessagingPerfTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setExceptionCode=function(a){this.$1.exception_code=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPerfTime=function(a){this.$1.perf_time=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setStack=function(a){this.$1.stack=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadOffset=function(a){this.$1.thread_offset=a;return this};return a}();c={event_name:!0,exception_code:!0,exception_message:!0,page_id:!0,perf_time:!0,platform:!0,stack:!0,thread_id:!0,thread_offset:!0};e.exports=a}),null);
__d("PagesManagerInboxLogger",["PagesManagerInboxTypedLogger","PagesMessagingInboxActionsTypedLogger","PagesMessagingPerfTypedLogger","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ERROR_GRAPH_QL:null,ERROR_JS:null,INITIAL_DATA_LOADED:null,INITIAL_LIST_RENDERED:null,INITIAL_LOAD:null,ITEM_DETAILS_LOADED:null,ITEM_LOADED:null,START_LOADING_ITEM_DETAILS:null,START_LOADING_ITEM:null,BROADCAST_MESSAGE_FORMAT:null,ITEM_STATUS_CHANGED:null,ITEM_STATUS_CHANGED_THREAD:null,ITEM_STATUS_CHANGED_HEADER:null,FOLDER_CHANGE_CLICKED:null,PLATFORM_CHANGE_TAB_CLICKED:null,SEND_COMMENT:null,SEND_MESSAGE:null,SEARCH_CLICKED:null,CONTENT_SEARCH_CLICKED:null,CREATE_BROADCAST_BUTTON_RENDERED:null,CREATE_BROADCAST_BUTTON_CLICKED:null,SEND_BROADCAST_BUTTON_CLICKED:null,SEND_BROADCAST_CONFIRM_BUTTON_CLICKED:null,BROADCAST_HISTORY_ROW_CLICK:null,AUTOMATED_RESPONSES_ENTRYPOINT_RENDERED:null,AUTOMATION_ENABLED:null,AUTOMATION_DISABLED:null,AUTOMATED_RESPONSES_SAVE_CLICK:null}),i,j,k=!0,l;function a(a){i=a,j=Date.now(),m(h.INITIAL_LOAD).setScreenHeight(screen.height).setScreenWidth(screen.width).log()}function b(a,b){if(!k)return;k=!1;m(h.INITIAL_LIST_RENDERED).setTimeSinceLoad(Date.now()-j).setPlatform(a).log()}function m(a){return new(c("PagesManagerInboxTypedLogger"))().setEventName(a).setPageID(i).setHref(window.location.href)}function d(a,b){m(h.ERROR_JS).setMessage(a.message).setStackTrace(a.stack).setModuleName(b).log()}function e(a){m(h.ERROR_GRAPH_QL).setMessage(a.message).setStackTrace(a.stack).log()}function f(a,b){if(l&&l.commItemID===a)return;l={commItemID:a,isCached:!0,startTimestamp:Date.now()};m(h.START_LOADING_ITEM).setPageCommItemID(a).setFolder(b).log()}function n(a){if(!l||l.commItemID!==a)return;m(h.INITIAL_DATA_LOADED).setPageCommItemID(a).setLoadTime(Date.now()-l.startTimestamp).log()}function o(a,b){if(!l||l.commItemID!==a)return;l.platform=b;l.isCached=!1;m(h.START_LOADING_ITEM_DETAILS).setPageCommItemID(a).setPlatform(b).setLoadTime(Date.now()-l.startTimestamp).log()}function p(a,b){if(!l||l.commItemID!==a)return;m(h.ITEM_DETAILS_LOADED).setPageCommItemID(a).setPlatform(b).setLoadTime(Date.now()-l.startTimestamp).log()}function q(a,b){if(l&&l.commItemID===a)return;l={commItemID:a,isCached:!0,startTimestamp:Date.now()};m(h.START_LOADING_ITEM).setThreadToken(a).setPlatform(b).log();new(c("PagesMessagingPerfTypedLogger"))().setPageID(i).setThreadID(a).setPlatform(b).setEventName("messages_messagelist_load_start").log()}function r(a,b){if(!l||l.commItemID!==a)return;var d=Date.now()-l.startTimestamp;m(h.ITEM_DETAILS_LOADED).setThreadToken(a).setPlatform(b).setLoadTime(d).log();new(c("PagesMessagingPerfTypedLogger"))().setPageID(i).setThreadID(a).setPlatform(b).setEventName("messages_messagelist_load_end").setPerfTime(d).log();l=null}function s(a){if(!l||l.commItemID!==a)return;m(h.ITEM_LOADED).setIsCached(l.isCached).setPageCommItemID(a).setLoadTime(Date.now()-l.startTimestamp).setPlatform(l.platform).log();l=null}function t(a){m(h.BROADCAST_MESSAGE_FORMAT).setBroadcastMessageFormat(a).log()}function u(a,b,c,d){d=d||null;m(h.ITEM_STATUS_CHANGED).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).setPageCommSearchType(d).log()}function v(a,b,c,d,e){e=e||null;m(h.ITEM_STATUS_CHANGED_THREAD).setFolder(d).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).setPageCommSearchType(e).log()}function w(a,b,c,d){m(h.ITEM_STATUS_CHANGED_HEADER).setFolder(d).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).log()}function x(a,b){m(h.FOLDER_CHANGE_CLICKED).setFolder(b).setPlatform(a).log()}function y(a,b){m(h.PLATFORM_CHANGE_TAB_CLICKED).setPlatform(a).setViewMode(b).log()}function z(a,b,d,e){d===void 0&&(d=null),e===void 0&&(e=null),new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("send_comment").setPlatform(a).addToExtraData("page_id",b).addToExtraData("comment_fbid",d).addToExtraData("post_fbid",e).log(),m(h.SEND_COMMENT).setPlatform(a).log()}function A(a,b){new(c("PagesMessagingInboxActionsTypedLogger"))().setPlatform(a).setInboxAction("mark_as_unread").addToExtraData("page_id",b).log()}function B(a,b,d,e,f){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("reaction").setPlatform(a).addToExtraData("page_id",b).addToExtraData("comment_fbid",d).addToExtraData("post_fbid",e).addToExtraData("reaction_type",f).log()}function C(a,b,d,e){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("send_message").setPlatform(a).addToExtraData("page_id",b).addToExtraData("enter_to_send_enabled",d.toString()).log(),m(h.SEND_MESSAGE).setPlatform(a).setFolder(e).log()}function D(a,b){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("receive_message").setPlatform(a).addToExtraData("page_id",b).log()}function E(a,b){m(h.SEARCH_CLICKED).setPageCommSearch(a).setPlatform(b).log()}function F(a,b){m(h.CONTENT_SEARCH_CLICKED).setPageCommSearchType(a).setPageCommSearch(b).log()}function G(){m(h.CREATE_BROADCAST_BUTTON_RENDERED).log()}function H(){m(h.CREATE_BROADCAST_BUTTON_CLICKED).log()}function I(a){m(h.SEND_BROADCAST_BUTTON_CLICKED).setBroadcastAudience(a).log()}function J(){m(h.SEND_BROADCAST_CONFIRM_BUTTON_CLICKED).log()}function K(){m(h.BROADCAST_HISTORY_ROW_CLICK).log()}function L(){m(h.AUTOMATED_RESPONSES_ENTRYPOINT_RENDERED).log()}function M(a){m(h.AUTOMATION_ENABLED).setAutomatedResponseTriggerType(a).log()}function N(a){m(h.AUTOMATION_DISABLED).setAutomatedResponseTriggerType(a).log()}function O(a,b){m(h.AUTOMATED_RESPONSES_SAVE_CLICK).setAutomatedResponseTriggerType(a).setHadError(b).log()}g.init=a;g.logInitialListRendered=b;g.create=m;g.logErrorJS=d;g.logErrorGraphQL=e;g.startLoadingItem=f;g.itemInitialDataLoaded=n;g.startLoadingItemDetails=o;g.itemDetailsLoaded=p;g.startLoadingThread=q;g.threadDetailsLoaded=r;g.itemRendered=s;g.logBroadcastMessageFormat=t;g.itemStatusChanged=u;g.itemStatusChangedInThread=v;g.itemStatusChangedInHeader=w;g.logFolderChangeClick=x;g.logPlatformChangedClicked=y;g.logSendComment=z;g.logMarkAsUnread=A;g.logCommentReaction=B;g.logSendMessage=C;g.logReceiveMessage=D;g.logSearchClick=E;g.logContentSearchClicked=F;g.logBroadcastButtonRendered=G;g.logBroadcastButtonClicked=H;g.logBroadcastSendButtonClicked=I;g.logBroadcastConfirmationButtonClicked=J;g.logBroadcastHistoryRowClicked=K;g.logAutomatedResponsesRendered=L;g.logAutomatedResponsesEnabled=M;g.logAutomatedResponsesDisabled=N;g.logAutomatedResponsesSaveClicked=O}),98);
__d("MercurySyncNewMessageTransformer",["Bootloader","FBIDCheck","IrisProtocolMessageLifetime","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MessageThreadReadState","MessageThreadReadStateEffect","MessageUnsendabilityStatus.bs","MessengerRealtimeAttachmentTransformer.bs","PageCommItemStatus","PagesManagerInboxLogger"],(function(a,b,c,d,e,f){"use strict";var g=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta,h=function(a){var b={};try{b=JSON.parse(a)}catch(a){}return b};function a(a,c){var d=parseInt(c.messageMetadata.timestamp,10),e=c.messageMetadata.skipBumpThread,f=g(a,c),i=f===b("MessageThreadReadState").MARK_UNREAD&&a!==c.messageMetadata.actorFbId.toString(),j=c.messageMetadata.messageId,k=[];c.attachments&&(k=c.attachments.map(function(c){var d;c.mercury?d=c.mercury:d=h(c.mercuryJSON);if(!d)return null;c=d.extensible_attachment;var e=d.blob_attachment;d=d.sticker_attachment;if(!c&&!e&&!d)return null;var f=b("FBIDCheck").isUser_deprecated(a);c?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:c},j,f):e?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{blob_attachments:[e]},j,f):c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{sticker:d},j,f);return c.length>0?c[0]:null}));var l=!b("FBIDCheck").isUser_deprecated(a);l&&c.messageMetadata.actorFbId!=a&&b("Bootloader").loadModules(["PagesCommsInboxFunnel","PagesCommsInboxLoggerEvent","PagesCommsInboxLoggerPlatform"],function(c,d,e){b("PagesManagerInboxLogger").logReceiveMessage("MESSENGER",a)},"MercurySyncNewMessageTransformer");k=k.filter(Boolean);var m=c.messageMetadata.tags?c.messageMetadata.tags[0]:void 0,n=null;if(c.data&&c.data.adminSignatureCreatorID){var o=c.data;n={creatorID:o.adminSignatureCreatorID||null,creatorName:o.adminSignatureCreatorName||null,creatorType:o.adminSignatureCreatorType||null,labelType:o.adminSignatureLabelType||null,pageID:o.adminSignaturePageID||null,profileURI:o.adminSignatureProfileURI||null}}return{message_id:j,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(c.messageMetadata.actorFbId),author_email:c.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:c.ttl?b("IrisProtocolMessageLifetime")[c.ttl]:0,timestamp:d,is_unread:i,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,source:m,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:c.messageMetadata.threadKey.threadFbId,other_user_fbid:c.messageMetadata.threadKey.otherUserFbId,body:c.body!==void 0?c.body:"",html_body:null,subject:null,has_attachment:k.length>0,attachments:k,ranges:void 0,thread_id:null,action_type:"ma-type:user-generated-message",is_from_iris:!0,is_sponsored:!!(c.data&&c.data.is_sponsored&&c.data.is_sponsored==="true")||!!(c.untypedData&&c.untypedData.is_sponsored&&c.untypedData.is_sponsored==="true"),commerce_message_type:c.data?c.data.commerce_message_type:null,customizations:c.data&&c.data.customization?b("MercuryMessageCustomizations").parseCustomizations(c.data.customization):null,platform_xmd:c.data&&c.data.platform_xmd?c.data.platform_xmd:null,profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),message_source:c.data&&c.data.message_source_data?h(c.data.message_source_data).message_source:null,skip_bump_thread:e,thread_read_state_effect:f,montage_reply_data:c.data&&c.data.montage_reply_data?h(c.data.montage_reply_data):null,meta_ranges:c.data&&c.data.meta_ranges?h(c.data.meta_ranges):null,creator_info:n,comm_status:l?b("PageCommItemStatus").TODO:null,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType)}}e.exports={transform:a}}),null);
__d("MercuryMessagePayload",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("MercuryAttachmentLayoutTypeHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return(a==null?void 0:(b=a.xma_layout_info)==null?void 0:b.layout_type)==="ADMIN"||(a==null?void 0:(b=a.share)==null?void 0:(a=b.xma_layout_info)==null?void 0:a.layout_type)==="ADMIN"}f.isAdminType=a}),66);
__d("MercuryMessageGroup",["MercuryAttachmentLayoutTypeHelper","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","MessengerMessage.bs","enumerate"],(function(a,b,c,d,e,f){"use strict";var g={calculateMessageGroups:function(a,c){var d=[],e=null,f={value:null};a=b("enumerate")(a);var h;while(!(h=a.next()).done){var i=g.canAppendMessageToLastGroup(f.value,h.value,c);i||(e=[],d.push(e));e.push(h.value);f=h}return d},canAppendMessageToLastGroup:function(a,c,d){var e=b("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!a||h(a,d)||h(c,d)||a.author!=c.author||a.timestamp<c.timestamp-e||a.is_spoof_warning!==c.is_spoof_warning||a.page_admin_notes||c.replied_to_message||c.is_forwarded)return!1;d=b("MessengerMessage.bs").getPersona(a);e=b("MessengerMessage.bs").getPersona(c);return!d&&!e?!0:d===null||e===null?!1:d.id===e.id}};function h(a,c){var d=a.has_attachment;d&&(c===b("MercuryShareAttachmentRenderLocations").MESSENGER||c===b("MercuryShareAttachmentRenderLocations").CHAT)&&(d=i(a));return!!(b("MessengerLightweightActionUtils").isLWAMessage(a)||a.action_type=="ma-type:log-message"||d||a.html_body||a.body&&a.body.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function i(a){a=a.attachments[0];return!a||a.attach_type==="sticker"||a.attach_type==="animated_image"||b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}e.exports=g}),null);
__d("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2269337216466106"};b.getQueryID=function(){return"489792994894664"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerUserProfileLocationUtils",["MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery","MessengerUserProfileLocationUtilsQuery.graphql","RelayFBEnvironment","RelayHooks","WebGraphQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){return d("RelayHooks").fetchQuery(c("RelayFBEnvironment"),h!==void 0?h:h=b("MessengerUserProfileLocationUtilsQuery.graphql"),{}).toPromise()}function a(){return i().then(function(a){var b=null,d=null;a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.user)==null?void 0:a.address;a!==null&&(b=(a==null?void 0:a.region)===""?null:a==null?void 0:a.region,d=(a==null?void 0:a.postal_code)===""?null:a==null?void 0:a.postal_code);if(b!==null&&d!==null)return{region:b,postal_code:d};else return c("WebGraphQL").exec(new(c("MessengerBusinessQuickReplyLocationQueryWebGraphQLQuery"))({})).then(function(a){a=(a=a)!=null?a.in_thread_user_fuzzy_location_search:a;if(a!==null){var c;b=b===null?(c=a)!=null?c.state:c:b;d=d===null?(c=a)!=null?c.zip_code:c:d}return{region:b,postal_code:d}})})}g.FetchMessengerUserRegionAndPostalCode=a}),98);
__d("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1570574486349284"};b.getQueryID=function(){return"389945858066688"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation","MessengerPlatformClientTypedLogger","PopupWindow","XMNCommerceCTAPostProcessController"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.process=function(a,b){b===void 0&&(b=null);var e=d("PopupWindow").open("",500,1024);a=c("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",b).getURI();new(c("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return e.location=a.payload}).send()};b.postHandle=function(a,b){a=c("GraphQLMessengerPlatformCtaPostHandlingWebGraphQLMutation").getURI({cta_id:a,message_id:b});new(c("AsyncRequest"))().setURI(a).send()};b.logCTAClick=function(a){var b,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:"UNKNOWN";e={action_id:(b=a)!=null?b.id:b,action_type:(b=a)!=null?b.action_type:b,action_url:((b=a)!=null?b.action_url:b)||((b=a)!=null?b.action_link:b),click_source:e,page_id:(b=a)!=null?b.page_id:b};new(c("MessengerPlatformClientTypedLogger"))().setClientUserID(c("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};return a}();b=new a();g["default"]=b}),98);
__d("LiveChatPluginTypingIndicator.react",["cx","Image.react","MercuryTypingAnimation_DEPRECATED.react","MessagingPluginContext","PrivacyTransparentOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return this.props.pageIsTyping?i.jsxs("div",{className:"_4xkn clearfix",children:[i.jsx("div",{className:"profilePictureColumn",children:i.jsx(c("PrivacyTransparentOverlay.react"),{children:i.jsx(c("Image.react"),{className:"profilePicture",src:this.context.state.pageProfilePictureUri})})}),i.jsx("div",{className:"messages",children:i.jsx("div",{className:"_4xko _13y8",children:i.jsx(c("MercuryTypingAnimation_DEPRECATED.react"),{})})})]}):null};return b}(i.Component);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("LiveChatPluginFileAttachment.react",["cx","Link.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs(c("Link.react"),{className:"_6d5w _6d5x",target:"_blank",href:this.props.attachment.url,children:[i.jsx("div",{className:"_6d5y"+(this.props.isFromViewer?"":" _6d5z")+(this.props.isFromViewer?" _6d5-":"")}),this.props.attachment.name]})};return b}(i.PureComponent);g["default"]=a}),98);
__d("LiveChatPluginLinkShareAttachment.react",["cx","CssBackgroundImage.react","LineClamp.react","Link.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs(c("Link.react"),{className:"_6bxn",href:this.props.uri,target:"_blank",children:[this.$1(),i.jsxs("div",{className:"_6j2g",children:[this.$2(),this.$3(),this.$4()]})]})};d.$1=function(){return this.props.image!=null?i.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0r",height:"150px",imageURI:this.props.image,width:"100%"}):null};d.$2=function(){return this.props.title!=null?i.jsx("div",{className:"_6bxo",children:i.jsx(c("LineClamp.react"),{lines:2,children:this.props.title})}):null};d.$3=function(){return this.props.description!=null?i.jsx("div",{className:"_6bxp",children:i.jsx(c("LineClamp.react"),{lines:2,children:this.props.description})}):null};d.$4=function(){return this.props.source!=null?i.jsx("div",{className:"_6bxq",children:this.props.source}):null};return b}(i.Component);g["default"]=a}),98);
__d("MPNE2ETestUtils",[],(function(a,b,c,d,e,f){"use strict";a="video-player";f.VIDEO_PLAYER_TEST_ID=a}),66);
__d("MPNFallbackAttachment.react",["cx","fbt","CssBackgroundImage.react","Link.react","LiveChatPluginLoggerUtil","MPNIdentity","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$4=function(){var a=c.context.state.pageID,b=d("MPNIdentity").MPNIdentity.currentUserID(),e=d("MPNIdentity").MPNIdentity.currentUserState();d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,e===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_attachment_fallback_clicked",xma_type:c.props.style})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){var a=this.context.state.pageID,b=d("MPNIdentity").MPNIdentity.currentUserID(),c=d("MPNIdentity").MPNIdentity.currentUserState();d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,c===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_attachment_fallback_impression",xma_type:this.props.style})};e.render=function(){var a=this.context.state.accessToken;if(a)return j.jsxs("div",{className:"_6bxn",children:[this.$1(),j.jsx("div",{className:"_6j2g",children:this.$2()})]});else return j.jsxs("div",{className:"_6bxn",children:[this.$1(),j.jsxs("div",{className:"_6j2g",children:[this.$2(),this.$3()]})]})};e.$1=function(){return this.props.image!=null?j.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0r",height:"150px",imageURI:this.props.image,width:"100%"}):null};e.$2=function(){return this.props.title!=null?j.jsx("div",{className:"_6bxo",children:this.props.title}):null};e.$3=function(){return j.jsx("div",{className:"_6bxp",children:i._("{=See the full message} trong Messenger",[i._param("=See the full message",j.jsx(c("Link.react"),{onClick:this.$4,href:"https://m.me/"+this.context.state.pageID,target:"_blank",children:i._("Xem to\u00e0n b\u1ed9 tin nh\u1eafn")}))])})};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("ChatPluginTemplateConverter",["URI","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=b?(b=a)!=null?b.target:b:(b=a)!=null?(b=b.share)!=null?(b=b.target)!=null?(b=b.items)!=null?b[0]:b:b:b:b;return!a||!a.name?null:{title:a.name,subtitle:(b=a)!=null?(b=b.metalines)!=null?b.metaline_1:b:b,default_action:(b=a)!=null?(b=b.default_action)!=null?b.action_link:b:b,image_url:a.thumb_url?a.thumb_url:(b=a)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?(b=b.image)!=null?b.uri:b:b:b:b,image_aspect_ratio:a.image_aspect_ratio,ctas:a.call_to_actions}}function i(a){var b;if(!a)return null;b=(b=a)!=null?b.messenger_generic_xma_template_extra_info:b;var c=[];for(var d=1;d<4;d++){var e,f="cta"+d;if(!b||!((e=b)!=null?e[f]:e))break;c.push(b[f])}return{title:a.title,subtitle:a.description,default_action:b==null?void 0:(e=b.default_cta)==null?void 0:e.action_url,image_url:(f=a.media)==null?void 0:f.image,image_aspect_ratio:null,ctas:c}}function a(a){a=(a=a)!=null?(a=a.share)!=null?a.subattachments:a:a;return!a||a.length===0?[]:a.map(function(a){var b;b=(b=a)!=null?(b=b.style_list)!=null?b[0]:b:b;return b=="messenger_generic_template"?i(a):h(a,!0)}).filter(function(a){return a})}function b(a){var b,d;d=(d=a)!=null?(d=d.share)!=null?(d=d.target)!=null?(d=d.items)!=null?d[0]:d:d:d:d;if(!d)return null;b=(b=d)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?b.large_preview:b:b:b;if(b)return{image_url:b.uri,height:b.height,width:b.width,playable:!1,ctas:d.call_to_actions};b=(b=d)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?b.playable_url:b:b:b;if(!b)return null;d=c("nullthrows")((d=d)!=null?(d=d.media_blob_attachments)!=null?d[0]:d:d);var e,f,g=null;d.__typename==="MessageVideo"?(e=d.original_dimensions.x,f=d.original_dimensions.y):(e=d.width,f=d.height,g=!0);return{image_url:null,height:f,width:e,playable:!0,playable_url:b,source_id:d.legacy_attachment_id?d.legacy_attachment_id:d.id,is_share:(f=g)!=null?f:!1,page_id:(e=a.metadata)==null?void 0:e.pageid,ctas:[]}}function d(a){var b;if(!((b=a.share)==null?void 0:b.media))return null;b=c("nullthrows")(a.share.media);a=(a=a)!=null?(a=a.share)!=null?a.messenger_generic_xma_template_extra_info:a:a;var d=[];for(var e=1;e<4;e++){var f,g="cta"+e;if(!a||!((f=a)!=null?f[g]:f))break;d.push(a[g])}if(b.playable&&b.source){f=new(c("URI"))(b.source).getQueryData();return{image_url:null,height:(g=b.image_size)==null?void 0:g.height,width:(a=b.image_size)==null?void 0:a.width,playable:b.playable,playable_url:b.source,source_id:f.entity_id,is_share:!1,ctas:d}}if(b.image){return{image_url:b.image,height:(e=b.image_size)==null?void 0:e.height,width:(g=b.image_size)==null?void 0:g.width,playable:!1,ctas:d}}return null}g.convertLegacySchemaToGenericTemplate=h;g.convertLightspeedSchemaToGenericTemplate=i;g.convertSchemaToHScroll=a;g.convertLegacySchemaToMediaTemplate=b;g.convertLightspeedSchemaToMediaTemplate=d}),98);
__d("MPNCallToAction.react",["cx","fbt","Link.react","LiveChatPluginLoggerUtil","MNCommerceCTAProcessor","MNCommercePostbackCTADataManager","MPNIdentity","MercuryIDs","MessagingPluginContext","PopupWindow","Tooltip.react","gkx","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k="https://www.facebook.com/plugins/chat/transcript";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.$6=function(){e.$10("customer_chat_open_url_cta_clicked")};e.$1=d("MercuryIDs").getThreadIDFromUserID(e.context.state.pageID);e.$2=d("LiveChatPluginLoggerUtil").getAttributionTags();e.$3=d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB;return e}var e=b.prototype;e.render=function(){var a,b=this,d=this.props,e=d.callToAction,f=d.messageID;d=(d=(d=e.action_type)!=null?d:e.action_open_type)!=null?d:e.type;a=(a=e.action_title)!=null?a:e.title;if(d==null||a==null)return null;var g=null;switch(d){case 2:case"xma_web_url":var h=(d=e.action_link)!=null?d:e.action_url;d=h!=null?h.includes(k):!1;d?g=this.$4(a,function(){b.$5(h)}):g=this.$4(a,this.$6,h);break;case 31:g=this.$4(a,function(){b.$5(e.action_link)});break;case 4:case"xma_postback":g=this.$4(a,function(){b.$7(e,f)});break;case 1:d=(d=e)!=null?(d=d.webview_metadata)!=null?d.messenger_extensions:d:d;if(d!=null){d=(d=e)!=null?(d=d.webview_metadata)!=null?d.fallback_url:d:d;g=this.$4(a,this.$6,d!=null?d:e.action_link)}else g=this.$8(a);break;case 5:case"xma_account_link":g=this.$4(a,function(){b.$9(e,f)});break;default:g=this.$8(a)}return j.jsx("div",{className:c("joinClasses")(this.props.className,"_6ir5"),children:j.jsx("div",{style:{width:(d=this.props.width)!=null?d:null},className:"_4bqf _6ir3",children:g})})};e.$4=function(a,b,d){return j.jsx(c("Link.react"),{className:"_6ir4","data-testid":void 0,href:d,style:{color:this.context.state.threadCSSColor},onClick:b,target:"_blank",children:a})};e.$8=function(a){return j.jsx("div",{className:"_6ir4 _6ir6",children:j.jsx(c("Tooltip.react"),{tooltip:i._("\u0110\u1ec3 s\u1eed d\u1ee5ng t\u00ednh n\u0103ng n\u00e0y, h\u00e3y d\u00f9ng \u1ee9ng d\u1ee5ng Messenger."),children:a})})};e.$9=function(a,b){var d;c("MNCommerceCTAProcessor").process((d=(d=a.id)!=null?d:a.target_id)!=null?d:"",b);this.$10("customer_chat_account_link_cta_clicked")};e.$5=function(a){d("PopupWindow").open(a,420,450),this.$10("customer_chat_open_dialog_cta_clicked")};e.$7=function(a,b){var e=d("MPNIdentity").MPNIdentity.currentUserState();if(e!==d("MPNIdentity").MPNIdentityState.GUEST&&e!==d("MPNIdentity").MPNIdentityState.FB)return;else if(e===d("MPNIdentity").MPNIdentityState.FB&&!c("gkx")("1422")){c("MNCommercePostbackCTADataManager").sendAndConfirm((e=(e=a.id)!=null?e:a.target_id)!=null?e:"",(e=(e=a.action_title)!=null?e:a.title)!=null?e:"",this.$1,null,null,null,this.$2,b,null,"source:discovery:customer_chat_plugin")}else{e=this.context.state.messageStore;b=e.sendQueue;if(!b)return;b.enqueueAndSend((e=(e=a.action_title)!=null?e:a.title)!=null?e:"",this.$3,b.makePlatformTokenForPostbackCTA((b=(e=a.id)!=null?e:a.target_id)!=null?b:""))}this.$10("customer_chat_postback_clicked")};e.$10=function(a){var b=this.context.state.pageID;d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",d("MPNIdentity").MPNIdentity.currentUserID(),b,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:a})};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNButtonTemplate.react",["cx","MPNCallToAction.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a;a=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.target)!=null?a.call_to_actions:a:a:a;var b=this.props.messageID;if(!a||a.length===0)return null;a=a.map(function(a,d){return i.jsx(c("MPNCallToAction.react"),{callToAction:a,className:d===0?"_6isd":"",messageID:b},a.id)});return i.jsx("div",{className:"_6b7s",children:a})};return b}(i.PureComponent);g["default"]=a}),98);
__d("MPNGenericTemplate.react",["cx","CssBackgroundImage.react","LineClamp.react","Link.react","MPNCallToAction.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return!this.props.template?null:i.jsxs("div",{className:"_6j2i",children:[this.$1(),i.jsxs("div",{className:"_6j2g",children:[this.$2(),this.$3()]}),this.$4()]})};d.$1=function(){var a,b,d;a=(a=this.props.template)==null?void 0:a.image_url;b=(b=this.props.template)==null?void 0:b.default_action;d=this.props.imageAspectRatio?this.props.imageAspectRatio:(d=this.props.template)==null?void 0:d.image_aspect_ratio;d=a||this.props.hasImage?i.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0s",height:d===1?"260px":"150px",imageURI:a,width:"100%"}):null;if(b&&a)return i.jsx(c("Link.react"),{href:b,target:"_blank",children:d});else return d};d.$2=function(){var a;a=(a=this.props.template)==null?void 0:a.title;return a?i.jsx(c("LineClamp.react"),{className:"_6j0t",lines:3,children:a}):null};d.$3=function(){var a;a=(a=this.props.template)==null?void 0:a.subtitle;return a?i.jsx("div",{className:"_6j0u",children:a}):null};d.$4=function(){var a;a=(a=this.props.template)==null?void 0:a.ctas;var b=this.props.messageID;if(!a||a.length===0)return null;var d=a.map(function(a,d){return i.jsx(c("MPNCallToAction.react"),{callToAction:a,messageID:b},d)});if(this.props.maxNumCTAs&&this.props.maxNumCTAs>a.length){var e=[];for(var f=0;f<this.props.maxNumCTAs-a.length;f++)e.push(i.jsx("div",{className:"_6j0z _6ir3 _6ir4",children:"\xa0"},f));d=e.concat(d)}return d};return b}(i.PureComponent);g["default"]=a}),98);
__d("MPNHScrollTemplate.react",["cx","AdsArrowedCarouselEnhanced.react","MPNGenericTemplate.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx(c("AdsArrowedCarouselEnhanced.react"),{isLeftArrowOverlappingContent:!1,children:this.$1()})};d.$1=function(){var a=this.props.messageID,b=!1,d=0,e=1.91;this.props.templates.forEach(function(a){a.ctas&&a.ctas.length>d&&(d=a.ctas.length),a.image_url!=null&&a.image_url.length>0&&(b=!0),a.image_aspect_ratio===1&&(e=1)});return this.props.templates.map(function(f,g){return i.jsx("div",{className:"_6j2h",children:i.jsx(c("MPNGenericTemplate.react"),{template:f,messageID:a,hasImage:b,imageAspectRatio:e,maxNumCTAs:d})},g)})};return b}(i.Component);g["default"]=a}),98);
__d("XMNLiveChatVideoAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/live_chat/video/",{video_id:{type:"String",required:!0},video_container_id:{type:"String",required:!0},width:{type:"Int",required:!0},height:{type:"Int",required:!0},start_muted:{type:"Bool",defaultValue:!1},no_fullscreen:{type:"Bool",defaultValue:!1},load_player_controller:{type:"Bool",defaultValue:!1},hide_controls_on_finish:{type:"Bool",defaultValue:!1},hide_url_menu_option:{type:"Bool",defaultValue:!1},is_share:{type:"Bool",defaultValue:!1},render_play_button:{type:"Bool",defaultValue:!1},start_timestamp:{type:"Int",defaultValue:0},native_thumbnail:{type:"Bool",defaultValue:!1},access_token:{type:"String"}})}),null);
__d("MPNVideoPlayer.react",["cx","ActorURI","AsyncRequest","BackgroundImage.react","Event","FullScreen","MessagingPluginContext","MessengerSpinner.react","ShimButton.react","SpotlightMercurySharedMediaViewer.react","SubscriptionsHandler","Vector","VideoPlayerReasonTransitionHelper","XMNLiveChatVideoAttachmentController","cssURL","getFullScreenElement","guid","joinClasses","prop-types","react","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j="_ox1",k="_27db";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d,e;e=a.call(this,b)||this;e.$2=!0;e.$3=[];e.$4=-1;e.$5=!1;e.$6=!1;e.state={playerAPI:null,forcePause:!!((d=e.props.videoData)==null?void 0:d.disableAutoplay)};e.$10=function(a){if(e.isVideoControlClicked(a)){a.preventDefault();a.stopPropagation();return}if(!e.isVideoClicked(a))return;a.preventDefault();e.props.isOnStage?(a.stopPropagation(),e.isState("playing")?e.pause("user_initiated"):e.play("user_initiated")):(e.pause("user_initiated"),e.props.onClick&&e.props.onClick())};e.$11=function(a){if(!e.isRightClick(a))return;a.stopPropagation();a.preventDefault();c("setImmediate")(function(){e.props.onSelect&&e.props.onSelect()})};e.$8=function(){if(!e.$2||e.state.forcePause)return;e.$6&&(e.play(new(c("VideoPlayerReasonTransitionHelper"))("page_visibility_initiated")),e.$6=!1)};e.$7=function(){if(!e.$2||e.state.forcePause||!(e.state.playerAPI&&e.state.playerAPI.isMuted()))return;e.$6=!!e.state.playerAPI&&e.state.playerAPI.isState("playing");e.pause()};e.onVideoLoaded=function(){if(!e.$2)return;e.state.playerAPI&&e.state.playerAPI.addListener("stateChange",function(){return e.$12()});e.props.isVisible&&!e.$5&&!e.state.forcePause?e.play("autoplay_initiated"):e.pause();e.$4=-1;e.$5=!1};e.$1=c("guid")();e.$2=!((d=b.videoData)==null?void 0:d.disableAutoplay);e.props.isInThread&&(e.listeners=new(c("SubscriptionsHandler"))(),e.listeners.addSubscriptions(c("Event").listen(window,"blur",e.$7),c("Event").listen(window,"focus",e.$8)));return e}var e=b.prototype;e.shouldComponentUpdate=function(a){var b=document.getElementById(this.$1.toString()),d=c("FullScreen").isFullScreen();if(b!=null&&d&&b.children[0].children[0]===c("getFullScreenElement")())return!1;d=!!(a.stageDimensions&&a.stageDimensions!==this.props.stageDimensions);d&&(this.$4=this.getCurrentTimePosition(),this.$5=!this.isState("playing"));return!this.props.videoData||a.videoData.id!==this.props.videoData.id||d};e.UNSAFE_componentWillReceiveProps=function(a){if(!this.$2)return;this.props.isInThread&&a.isVisible!==this.props.isVisible&&(a.isVisible&&!this.state.forcePause?this.play(new(c("VideoPlayerReasonTransitionHelper"))("video_visibility_initiated")):this.pause())};e.componentDidMount=function(){this.props.videoData&&this.$9()};e.componentDidUpdate=function(){this.$3.forEach(function(a){return a.abandon()}),this.$3=[],this.props.videoData&&this.$9()};e.componentWillUnmount=function(){this.pause("unloaded"),this.seek(0),this.$3.forEach(function(a){return a.abandon()}),this.listeners&&this.listeners.release(),this.state.playerAPI&&this.state.playerAPI.detachRootNode(),this.state.playerAPI&&this.state.playerAPI.destroy&&this.state.playerAPI.destroy()};e.isVideoLoaded=function(){var a=!!this.state.playerAPI;!a;return this.isState("fallback")?!1:a};e.isVideoClicked=function(a){return a.target instanceof HTMLElement?a.target.classList.contains(j):!1};e.isVideoControlClicked=function(a){var b=document.getElementsByClassName(k);for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=a.target;if(e.contains(f))return!0}return!1};e.isRightClick=function(a){a=a||window.event;return a.button===2};e.play=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.play(a)};e.pause=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.pause(a)};e.seek=function(a){if(!this.isVideoLoaded())return;this.state.playerAPI&&this.state.playerAPI.seek(a)};e.getCurrentTimePosition=function(){return this.isVideoLoaded()&&this.state.playerAPI?this.state.playerAPI.getCurrentTimePosition():-1};e.render=function(){var a=this.props.videoData,b=i.jsx("div",{ref:"placeholder",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").large_size})}),d={};if(a&&a.url){var e=a.original_dimensions;d.backgroundImage=c("cssURL")(a.url);b=i.jsx("div",{ref:"placeholder",children:i.jsx(c("BackgroundImage.react"),{className:this.props.className,width:e.x,height:e.y,loadingIndicatorStyle:"large",backgroundSize:"cover",ref:"placeholder",style:d,src:a.url})})}return i.jsx(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_4-od"),id:this.$1,onClick:this.$10,onMouseDown:this.$11,style:d,children:b})};e.$9=function(){var a=this,b=this.props.videoData,e=this.context.state.accessToken;if(b){var f=b.original_dimensions;this.props.stageDimensions&&(f=c("SpotlightMercurySharedMediaViewer.react").getImageDimensionsForStage(new(c("Vector"))(b.original_dimensions.x,b.original_dimensions.y),this.props.stageDimensions));f=c("XMNLiveChatVideoAttachmentController").getURIBuilder().setString("video_id",b.legacy_attachment_id).setString("video_container_id",this.$1).setInt("width",f.x).setInt("height",f.y).setInt("start_timestamp",this.$4>0?Math.round(this.$4):0).setBool("start_muted",b.start_muted).setBool("no_fullscreen",b.no_fullscreen).setBool("load_player_controller",!0).setBool("hide_controls_on_finish",b.hide_controls_on_finish).setBool("native_thumbnail",b.disableAutoplay).setBool("hide_url_menu_option",Boolean(b.hide_url_menu_option)).setBool("is_share",b.is_share).setBool("render_play_button",this.props.isInThread).setString("access_token",e).getURI();this.props.pageId&&(f=d("ActorURI").create(f,this.props.pageId));var g=new(c("AsyncRequest"))();this.$3.push(g);g.setMethod("GET").setStatusElement(this.refs.placeholder).setURI(f).setRelativeTo(this).setReadOnly(!0).setHandler(function(b){a.$3=a.$3.filter(function(a){return a!==g})}).send()}};e.$12=function(){this.props.isVisible&&this.isState("finished")?(this.seek(0),this.play("loop_initiated")):this.props.isVisible&&this.isState("paused")&&!this.$6?this.setState({forcePause:!0}):this.isState("playing")&&this.setState({forcePause:!1})};e.isState=function(a){return!!(this.state.playerAPI&&this.state.playerAPI.isState(a))};return b}(i.Component);a.contextType=c("MessagingPluginContext");a.propTypes={pageId:c("prop-types").string,className:c("prop-types").string,isInThread:c("prop-types").bool,isVisible:c("prop-types").bool,isOnStage:c("prop-types").bool,stageDimensions:c("prop-types").instanceOf(c("Vector")),videoData:c("prop-types").object,onClick:c("prop-types").func,onSelect:c("prop-types").func};a.invokeVideoLoaded=function(a,b,c){a.$2=c,b.setAllowCrossPageTransition(!0),b.isState("loading")?a.stateChangeListener=b.addListener("stateChange",function(){if(!b.isState("loading")){if(a.state&&a.state.playerAPI)return;a.setState({playerAPI:b},a.onVideoLoaded);a.stateChangeListener&&a.stateChangeListener.remove()}}):a.setState({playerAPI:b},a.onVideoLoaded)};g["default"]=a}),98);
__d("MPNMediaTemplate.react",["cx","Image.react","MPNCallToAction.react","MWChatVideoPlayer.react","MessengerSpinner.react","VideoAutoplayManagerX.react","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=360,k=290,l=100;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){if(!this.props.template)return null;var a=c("nullthrows")(this.props.template);return i.jsxs("div",{className:"_3cn0",children:[this.$1(a),this.$2(a)]})};d.$1=function(a){if(a.playable){if(!a.playable_url)return null;var b=this.$3(a);return this.$4(a,b)}if(!a.image_url)return null;b=this.$5({height:a.height,width:a.width});return i.jsx(c("Image.react"),{className:"_2k7y",height:b.y,width:b.x,src:a.image_url})};d.$3=function(a){return{legacy_attachment_id:a.source_id,original_dimensions:this.$5({height:a.height,width:a.width}),start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:a.playable_url,is_share:a.is_share}};d.$4=function(a,b){if(b===null||b===void 0)return null;a=i.jsx(c("VideoAutoplayManagerX.react"),{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:b.fbid,originalHeight:b.original_dimensions.y,originalWidth:b.original_dimensions.x,sdSrc:b.url})});return i.jsx(i.Suspense,{fallback:i.jsx("div",{style:{width:b.original_dimensions.x,height:b.original_dimensions.y},children:i.jsx("div",{className:"spinner",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").medium_size})})}),children:a})};d.$5=function(a){var b=a.width;a=a.height;var c=1;c=Math.min(c,Math.min(k/b,j/a));c=Math.max(c,l/b);b=Math.round(b*c);a=Math.round(a*c);return{x:b,y:a}};d.$2=function(a){if(!a.ctas||a.ctas.length===0)return null;var b=this.props.messageID,d=this.$5({height:a.height,width:a.width});a=a.ctas.map(function(a,e){return i.jsx(c("MPNCallToAction.react"),{width:d.x,callToAction:a,className:e===0?"_6isd":"",messageID:b},a.id)});return a};return b}(i.PureComponent);g["default"]=a}),98);
__d("MPNTemplateRenderer.react",["ChatPluginTemplateConverter","MPNButtonTemplate.react","MPNFallbackAttachment.react","MPNGenericTemplate.react","MPNHScrollTemplate.react","MPNMediaTemplate.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a,b;b=(b=this.props.attachment)!=null?(b=b.share)!=null?(b=b.style_list)!=null?b[0]:b:b:b;var e=this.props.messageID;switch(b){case"h_scroll":return h.jsx(c("MPNHScrollTemplate.react"),{templates:d("ChatPluginTemplateConverter").convertSchemaToHScroll(this.props.attachment),messageID:e});case"business_message_items":a=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.target)!=null?a.call_to_actions:a:a:a;if(a&&a.length>0)return h.jsx(c("MPNButtonTemplate.react"),{attachment:this.props.attachment,messageID:e});else return h.jsx(c("MPNGenericTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLegacySchemaToGenericTemplate(this.props.attachment,!1),messageID:e});case"messenger_platform_media_attachment":return h.jsx(c("MPNMediaTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLegacySchemaToMediaTemplate(this.props.attachment),messageID:e});case"messenger_generic_template":return((a=this.props.attachment.share)==null?void 0:(a=a.media)==null?void 0:a.playable)?h.jsx(c("MPNMediaTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLightspeedSchemaToMediaTemplate(this.props.attachment),messageID:e}):h.jsx(c("MPNGenericTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLightspeedSchemaToGenericTemplate(this.props.attachment.share),messageID:e});default:e=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.media)!=null?a.image:a:a:a;a=(a=this.props.attachment)!=null?(a=a.share)!=null?a.title:a:a;return h.jsx(c("MPNFallbackAttachment.react"),{style:b,image:e,title:a})}};return b}(h.PureComponent);g["default"]=a}),98);
__d("XStickerAssetController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/asset/",{sticker_id:{type:"Int",required:!0},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}})}),null);
__d("MPNAttachmentRenderer.react",["cx","Image.react","LiveChatPluginFileAttachment.react","LiveChatPluginLinkShareAttachment.react","MPNE2ETestUtils","MPNFallbackAttachment.react","MPNTemplateRenderer.react","MWChatVideoPlayer.react","MercuryAttachment","MessagingPluginContext","MessengerSpinner.react","ShimButton.react","Sticker.react","StickerConstants","URI","VideoAutoplayManagerX.react","XStickerAssetController","guid","isLinkshimURI","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=360,k=290;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a=this;return d("MercuryAttachment").get(this.props.message).filter(function(a){return a===Object(a)}).map(function(b){var d,e=null;switch(b.attach_type){case"animated_image":case"photo":e=a.$1(b);break;case"sticker":e=a.$2(b);break;case"video":e=a.$3(b);break;case"share":e=a.$4(b);break;case"file":return a.$5(b);default:d=(d=b)!=null?(d=d.media)!=null?d.image:d:d;e=i.jsx(c("MPNFallbackAttachment.react"),{style:b.attach_type,image:d,title:b.title});break}return i.jsx("div",{className:a.$6(b)?"_2k7x":"",children:e},a.$7(b))})};e.$1=function(a){return i.jsx(c("Image.react"),{className:"_2k7y",onClick:this.props.onMessageClick,src:a.large_preview_url||a.preview_url})};e.$2=function(a){a=a.metadata;return!a?null:i.jsx(c("ShimButton.react"),{onClick:this.props.onMessageClick,children:i.jsx(c("Sticker.react"),{accessibilityLabel:a.accessibilityLabel,animationTrigger:"load_and_hover",customColor:this.context.state.threadCSSColor,frameCount:a.frameCount||1,frameRate:a.frameRate||c("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:a.framesPerCol||1,framesPerRow:a.framesPerRow||1,paddedSpriteURI:a.paddedSpriteURI,sourceHeight:a.height,sourceURI:c("XStickerAssetController").getURIBuilder().setInt("sticker_id",a.stickerID).getURI().toString(),sourceWidth:a.width,stickerID:a.stickerID.toString(),spriteURI:a.spriteURI})})};e.$3=function(a){a=this.$8(a);if(a===null||a===void 0)return null;var b=i.jsx(c("VideoAutoplayManagerX.react"),{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:a.fbid,originalHeight:a.original_dimensions.y,originalWidth:a.original_dimensions.x,sdSrc:a.url})});return i.jsx(i.Suspense,{fallback:i.jsx("div",{style:{width:a.original_dimensions.x,height:a.original_dimensions.y},children:i.jsx("div",{className:"spinner",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").medium_size})})}),children:i.jsx("div",{"data-testid":void 0,children:b})})};e.$4=function(a){var b,d,e,f=this.$9();e=(e=a)!=null?(e=e.share)!=null?e.uri:e:e;b=(b=this.props.message)==null?void 0:b.message_id;d=a==null?void 0:(d=a.share)==null?void 0:d.style_list;var g="fallback";d!=null&&d.length>0&&(g=d[0]);d=f!=null||g=="business_message_items"||g=="messenger_generic_template"||g=="h_scroll";if(d)return i.jsx(c("MPNTemplateRenderer.react"),{attachment:a,messageID:b});else if(e&&c("isLinkshimURI")(new(c("URI"))(e))){var h;d=(f=a)!=null?(f=f.share)!=null?f.description:f:f;f=(b=a)!=null?(b=b.share)!=null?(b=b.media)!=null?b.image:b:b:b;b=(b=a)!=null?(b=b.share)!=null?b.source:b:b;h=(h=a)!=null?(h=h.share)!=null?h.title:h:h;return i.jsx(c("LiveChatPluginLinkShareAttachment.react"),{description:d,image:f,source:b,title:h,uri:e})}else{f=(d=a)!=null?(d=d.share)!=null?(d=d.media)!=null?d.image:d:d:d;h=(b=a)!=null?(b=b.share)!=null?b.title:b:b;return i.jsx(c("MPNFallbackAttachment.react"),{style:g,image:f,title:h})}};e.$5=function(a){return i.jsx(c("ShimButton.react"),{className:"_2k7x",onClick:this.props.onMessageClick,style:{border:"none"},children:i.jsx("div",{className:"_46jp",style:{backgroundColor:this.props.backgroundColor},children:i.jsx(c("LiveChatPluginFileAttachment.react"),{attachment:a,isFromViewer:this.props.isFromViewer},"file:"+a.url)})},this.$7(a))};e.$7=function(a){if(a.deduplication_key)return a.deduplication_key;if(a.metadata&&a.metadata.fbid)return a.metadata.fbid;return a.upload_id?a.upload_id:c("guid")()};e.$8=function(a){var b,c;if(!a.metadata)return null;c=((c=a)!=null?(c=c.metadata)!=null?(c=c.dimensions)!=null?c.width:c:c:c)||k;b=((b=a)!=null?(b=b.metadata)!=null?(b=b.dimensions)!=null?b.height:b:b:b)||j;c=c/b;b={x:c>=1?k:Math.round(j*c),y:c>=1?Math.round(k/c):j};return{legacy_attachment_id:a.metadata.fbid,original_dimensions:b,start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:a.url}};e.$9=function(){try{var a=this.props.message.platform_xmd;if(a){a=JSON.parse(a);if(a)return a}}catch(a){}return null};e.$6=function(a){if(a.attach_type==="sticker")return!1;if(a.attach_type==="share"){var b=this.$9();a=(a=a)!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a;if(b&&a==="h_scroll")return!1}return!0};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNQuickReplyContainer.react",["cx","MPNConstants","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.layout;a=a.children;b=b===d("MPNConstants").MPNQuickReplyLayout.HORIZONTAL;return i.jsx("div",{className:(b?"_9k7q":"")+(b?"":" _9k7r"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNQuickReplyPill.react",["cx","ShimButton.react","Tooltip.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.children,d=a.onClick,e=a.disabled;a=a.tooltip;e=i.jsx(c("ShimButton.react"),{"data-testid":void 0,className:"_9k7s"+(e?" _9k7t":""),onClick:d,children:b});return a!==void 0?i.jsx(c("Tooltip.react"),{tooltip:a,children:e}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNIcebreakers.react",["LiveChatPluginLoggerUtil","MNCommercePostbackCTADataManager","MPNConstants","MPNIdentity","MPNQuickReplyContainer.react","MPNQuickReplyPill.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MessagingPluginContext","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(c("MessagingPluginContext")).state,e=b.icebreakers,f=b.icebreakerCtas,g=b.pageID,k=b.messageStore,l=c("MercuryIDs").getThreadIDFromUserID(g),m=d("LiveChatPluginLoggerUtil").getAttributionTags();j(function(){e!=null&&e.length>0&&d("LiveChatPluginLoggerUtil").logImpressionUsingFalco(g,"icebreakers",null,null,null,null,d("MPNIdentity").MPNIdentity.currentUserID())},[g,e]);if(!e)return null;var n=function(a){var b=d("MPNIdentity").MPNIdentity.currentUserID();if(b==null)return;b=d("MPNIdentity").MPNIdentity.currentUserState();var e=b===d("MPNIdentity").MPNIdentityState.FB;if(b!==d("MPNIdentity").MPNIdentityState.GUEST&&b!==d("MPNIdentity").MPNIdentityState.FB)return;else if(e&&!c("gkx")("1422"))c("MNCommercePostbackCTADataManager").sendAndConfirm(a.id,a.title,l,null,null,null,m,null,null,"source:discovery:customer_chat_plugin");else{if(!k||!k.sendQueue)return;b=k.sendQueue;if(!b)return;b.enqueueAndSend(a.title,e,b.makePlatformTokenForPostbackCTA(a.id))}p()},o=function(b){var e=d("MPNIdentity").MPNIdentity.currentUserID();if(e==null)return;var f=d("MPNIdentity").MPNIdentity.currentUserState(),g=f===d("MPNIdentity").MPNIdentityState.FB;if(f!==d("MPNIdentity").MPNIdentityState.GUEST&&f!==d("MPNIdentity").MPNIdentityState.FB)return;else if(g&&!c("gkx")("1422")){f=new(c("MercuryMessageObject"))(e);e=c("MercuryMessageActions").getForFBID(e);e.send(f.constructUserGeneratedMessageObject(b,"source:discovery:customer_chat_plugin",a.threadID,null,null,d("LiveChatPluginLoggerUtil").getAttributionTags()))}else{if(!k||!k.sendQueue)return;e=k.sendQueue;if(!e)return;e.enqueueAndSend(b,g)}p()},p=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID();if(a==null)return;var b=d("MPNIdentity").MPNIdentity.currentUserState();b===d("MPNIdentity").MPNIdentityState.GUEST?d("LiveChatPluginLoggerUtil").logActionUsingFalco(a,g,"guest_chat_tab","message_send",null,null,null,"true"):d("LiveChatPluginLoggerUtil").logActionUsingFalco(a,g,"logged_in_chat_tab","message_send",null,null,null,"true")};f!=null&&f.length>0?b=f.map(function(a,b){return h.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){return n(a)},children:a.title},b)}):b=e.map(function(a,b){return h.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){return o(a.message)},children:a.message},a.messageKey+b)});return h.jsx(c("MPNQuickReplyContainer.react"),{layout:d("MPNConstants").MPNQuickReplyLayout.VERTICAL,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNLogMessage.react",["cx","Link.react","LinkCTAXMATAsyncLink.react","MessengerTextWithEntities.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b;b=(b=a.message)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;var d=null;switch(b){case"link_cta":if(a.message.log_message_data!=null&&a.message.log_message_data.untypedData!==null){b=a.message.log_message_data.untypedData;var e=b.primary_text?b.primary_text:b.link_cta_xmat_primary_text,f=b.primary_text?b.cta_text:b.link_cta_xmat_cta_text;if(b.www_is_async_url){var g=b.async_url;d=i.jsxs("div",{children:[e," ",i.jsx(c("LinkCTAXMATAsyncLink.react"),{text:f,uri:g})]})}else{g=b.primary_text?b.cta_url:b.link_cta_xmat_cta_url;d=i.jsxs("div",{children:[e," ",i.jsx(c("Link.react"),{href:g,children:f})]})}}else d=null;break;default:d=i.jsx(c("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:a.message.log_message_body})}return i.jsx("div",{className:"logMessage",children:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessage.react",["cssVar","cx","fbt","Arbiter","EmojiOnlyMessage.react","Image.react","Link.react","LiveChatPluginConstants","LiveChatPluginLoggerUtil","MPNAttachmentRenderer.react","MPNIdentity","MercuryMessageDeliveryState","MercuryTimestamp","MessagingPluginContext","MessengerDateBreak.re","MessengerHotLikeSVGReact.re","MessengerMessage.bs","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","ReactDOM","ShimButton.react","Text.react","URI","UnicodeUtils","getURLRanges","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={emojis:null,showTimestamp:!1},e.$1=!1,e.$13=function(a,b){if(b.entity&&b.entity.url&&c("URI").isValidURI(b.entity.url)){var d=new(c("URI"))(b.entity.url.replace(/#+$/,""));d=d.toString();return k.jsx(c("Link.react"),{href:{url:d,shimhash:b.entity.shimhash},s:b.entity.s,target:"_blank",children:a})}return a},e.$14=function(a){return d("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)},e.$15=function(){var a=e.context.state,b=a.guestID;a=a.pageID;if(e.props.message.message_id=="welcome_message")return;e.setState(function(a){a=!a.showTimestamp;e.props.showTimestampHandler(a&&e.props.isLastMessageInGroup&&!e.props.isFromViewer);a&&c("Arbiter").inform(d("LiveChatPluginConstants").CLOSE_TIMESTAMPS);return{showTimestamp:a}});d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_message_bubble_clicked"})},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidMount=function(){var a=this;if(this.props.message.body){var b=d("MessengerSupportedEmojiUtils").getEmojiOnlyContents(this.props.message.body);this.setState({emojis:b})}this.$2=c("Arbiter").subscribe(d("LiveChatPluginConstants").CLOSE_TIMESTAMPS,function(b){a.state.showTimestamp&&(a.setState({showTimestamp:!1}),a.props.isLastMessageInGroup&&!a.props.isFromViewer&&a.props.showTimestampHandler(!1))})};e.componentDidUpdate=function(){if(this.state.showTimestamp){var a=d("ReactDOM").findDOMNode(this);a instanceof HTMLElement&&this.props.scrollIntoView(a,this.props.dateBreakPreceeds)}};e.componentWillUnmount=function(){c("Arbiter").unsubscribe(this.$2)};e.render=function(){var a=this.props,b=a.isFromViewer;a=a.message;if(a.is_filtered_content)return null;var c=d("MessengerMessage.bs").getDeliveryState(this.props.message,this.props.deliveryTimestamp),e=this.$3(c),f="transparent";!this.state.emojis&&b?f=this.context.state.threadCSSColor:!this.state.emojis&&!b&&(f="#f1f0f0");var g=this.$4();return k.jsxs("div",{className:"_21c3",children:[this.$5(),k.jsxs("div",{className:"clearfix _2a0-",children:[this.$6(a,b,f),this.$7(a,b,f),this.$8(g),this.$9(c,e),this.$10(c,e)]}),this.$11(c,e,g)]})};e.$12=function(a){var b=d("UnicodeUtils").strlen(a),e=c("getURLRanges")(a).filter(function(a){return a!==void 0&&a!==null});e=e.filter(function(a){return a.offset>=0&&a.offset+a.length<=b}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset})});return k.jsx(c("MessengerTextWithEntities.react"),{interpolator:this.$13,isSupportedEmoji:this.$14,ranges:e,renderEmoji:!0,renderEmoticons:!0,text:a})};e.$5=function(){return!this.state.showTimestamp||this.props.dateBreakPreceeds?null:k.jsx(d("MessengerDateBreak.re").make,{className:"datebreak",date:new Date(this.props.message.timestamp)})};e.$6=function(a,b,d){var e=null;this.state.emojis&&this.state.emojis.length>0?e=k.jsx(c("EmojiOnlyMessage.react"),{contents:this.state.emojis}):a.body?e=this.$12(a.body):e=null;return e?k.jsx(c("ShimButton.react"),{className:"_4xko"+(this.state.emojis?" _gb1":"")+(b?"":" _4xkr")+(b?" _4xks":""),onClick:this.$15,style:{backgroundColor:d},tabIndex:"0",children:e},"t:"+a.message_id):null};e.$7=function(a,b,e){var f=null;if(a.has_attachment||a.attachments.length>0){e=a.is_like_preview?k.jsx("div",{className:"_8gn6 _8gn7",children:k.jsx(d("MessengerHotLikeSVGReact.re").make,{color:e})}):k.jsx(c("MPNAttachmentRenderer.react"),{backgroundColor:e,isFromViewer:b,message:a,onMessageClick:this.$15});e&&(f=k.jsx("div",{className:"_4xko _2k7w"+(b?"":" _4xkr")+(b?" _4xks":""),children:e},"a:"+a.message_id))}return f};e.$4=function(){var a=this.props,b=a.message,c=a.isFromViewer,d=a.isLastMessageInGroup,e=a.lastReadTimestamp,f=a.showSentAndSeenHead;a=a.nextMessageTimestamp;if(!f)return!1;if(c&&!(e===Infinity&&d&&a===Infinity||e===b.timestamp||e>b.timestamp&&e<a))return!1;else if(!c&&e!==b.timestamp)return!1;return!0};e.$8=function(a){var b=this.props,e=b.message;b=b.readReceipt;var f=this.context.state,g=f.pageName;f=f.pageProfilePictureUri;if(d("MessengerMessage.bs").isSending(e)||d("MessengerMessage.bs").hasError(e)||!f||!a||b==null)return null;e=b.action/1e3;a=Object.keys(b).length?j._("{full name} \u0111\u00e3 xem l\u00fac {seen time}",[j._param("full name",g),j._param("seen time",d("MercuryTimestamp").getPreciseTimestamp(e))]):j._("Ng\u01b0\u1eddi xem: {full name}",[j._param("full name",g)]);return k.jsx("span",{className:"_21c4",children:k.jsx(c("Image.react"),{alt:a,className:"_21c5",src:f,title:a})})};e.$3=function(a){switch(a){case c("MercuryMessageDeliveryState").SENDING:return j._("\u0110ang g\u1eedi");case c("MercuryMessageDeliveryState").SENT:return j._("\u0110\u00e3 g\u1eedi");case c("MercuryMessageDeliveryState").DELIVERED:return j._("\u0110\u00e3 chuy\u1ec3n");case c("MercuryMessageDeliveryState").ERROR:return j._("L\u1ed7i");default:return null}};e.$10=function(a,b){if(!this.props.isFromViewer||!this.props.showDeliveryState||a===c("MercuryMessageDeliveryState").UNKNOWN||this.$1)return null;var d={};this.context.state.threadCSSColor&&(a===c("MercuryMessageDeliveryState").SENT||a===c("MercuryMessageDeliveryState").SENDING||a===c("MercuryMessageDeliveryState").DELIVERED)&&(d.color=this.context.state.threadCSSColor);return k.jsx("span",{className:"_21c6"+(a===c("MercuryMessageDeliveryState").SENDING?" _4f-a":"")+(a===c("MercuryMessageDeliveryState").SENT?" _4f-b":"")+(a===c("MercuryMessageDeliveryState").DELIVERED?" _21c8":""),style:d,title:b,children:k.jsx("i",{"aria-label":b,"aria-roledescription":j._("Bi\u1ec3u t\u01b0\u1ee3ng tr\u1ea1ng th\u00e1i"),className:a!==c("MercuryMessageDeliveryState").SENDING?"_21c7":"",role:"img"})})};e.$9=function(a,b){if(!this.props.isFromViewer)return null;a===c("MercuryMessageDeliveryState").ERROR||a===c("MercuryMessageDeliveryState").SENDING&&this.props.connectionState!==d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED&&!navigator.userAgent.includes("Firefox")?this.$1=!0:a!==c("MercuryMessageDeliveryState").ERROR&&this.$1&&(this.$1=!1);return k.jsxs(c("Text.react"),{className:"_6934"+(this.$1?"":" noDisplay"),onClick:function(){},children:[j._("Kh\u00f4ng g\u1eedi \u0111\u01b0\u1ee3c tin nh\u1eafn n\u00e0y."),k.jsx("span",{className:"_21c6 error",title:b})]})};e.$11=function(a,b,e){if(!this.state.showTimestamp||a===c("MercuryMessageDeliveryState").ERROR)return null;a=this.props;var f=a.isFromViewer,g=a.lastMessageID,h=a.message,i=a.readReceipt;a=a.showSentAndSeenHead;b=b;!a||i==null||a&&(!f||h.timestamp<i.action&&g!==h.message_id)?b=j._("\u0110\u00e3 xem"):a&&e&&f&&i!==null&&g!==null&&(b=j._("{=Seen}{seen time}",[j._param("=Seen",k.jsx(c("Text.react"),{style:{fontWeight:"800",paddingRight:"3px"},children:j._("Xem")})),j._param("seen time",d("MercuryTimestamp").getPreciseTimestamp(i.action))]));h={animation:"fadeIn .1s cubic-bezier(.4,0,.2,1) both",clear:"both",color:"rgba(0, 0, 0, 0.4)","float":"none",fontSize:"12px",fontWeight:"500",paddingLeft:"0px",paddingRight:"0px"};f?(h["float"]="right",h.paddingRight="7px"):(h["float"]="left",h.paddingLeft="3px");return k.jsx(c("Text.react"),{style:h,children:b})};return b}(k.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNMessageGroup.react",["cx","fbt","MPNMessage.react","MessagingPluginContext","MessagingPluginMobileProfilePicture.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showTimestamp:!1},c.$2=function(a){if(c.props.isFromViewer)return;c.setState({showTimestamp:a})},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.render=function(){var a,b=this;a=this.props.isFromViewer?null:j.jsx("div",{className:"profilePictureColumn",style:{bottom:this.state.showTimestamp?"15px":"0px"},children:j.jsx(c("MessagingPluginMobileProfilePicture.react"),{personaProfilePictureUri:(a=this.props.persona)==null?void 0:a.profile_picture_url,className:"profilePicture",disableStatusIndicator:!0})});var d=this.props.messages.map(function(a,d){return j.jsx(c("MPNMessage.react"),{connectionState:b.props.connectionState,dateBreakPreceeds:b.props.dateBreakPreceeds&&d===0,deliveryTimestamp:b.props.deliveryTimestamp,isFromViewer:b.props.isFromViewer,isLastMessageInGroup:d===b.props.messages.length-1,lastMessageID:b.props.lastMessageID,lastReadTimestamp:b.props.lastReadTimestamp,message:a,nextMessageTimestamp:b.$1(d),readReceipt:b.props.readReceipt,scrollIntoView:b.props.scrollIntoView,showDeliveryState:a.timestamp>b.props.lastReadTimestamp,showSentAndSeenHead:b.props.nextGroupTimestamp>=b.props.lastReadTimestamp,showTimestampHandler:b.$2,attachmentDidUpdate:a.attachments.length>0},a.message_id)});return j.jsxs("div",{className:"_4xkn clearfix",children:[a,j.jsxs("div",{className:"messages",children:[this.$3(),j.jsx("div",{children:d})]})]})};d.$3=function(){var a=this.context.state.pageName;if(this.props.persona!=null){a=i._("{persona name} t\u1eeb {page name}",[i._param("persona name",this.props.persona.name),i._param("page name",a)]);var b=a.toString();return j.jsx("div",{"aria-label":b,className:"_9e1n",children:a})}return null};d.$1=function(a){return a<this.props.messages.length-1?this.props.messages[a+1].timestamp:this.props.nextGroupTimestamp};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNMessageList.react",["cx","MPNIdentity","MPNLogMessage.react","MPNMessageGroup.react","MercuryIDs","MercuryMessageGroup","MessagingPluginContext","MessengerDateBreak.re","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=1e3*60*60;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state={messageGroups:d("MercuryMessageGroup").calculateMessageGroups(c.props.messages)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.UNSAFE_componentWillReceiveProps=function(a){a.messages!==this.props.messages&&this.setState({messageGroups:d("MercuryMessageGroup").calculateMessageGroups(a.messages)})};e.render=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID();if(a==null)return null;var b=[],e=this.state.messageGroups,f=this.props.readReceipt,g=f?f.watermark:0,h=this.props.messages.last()?this.props.messages.last().message_id:null;for(var k=0;k<e.length;k++){var l=k>0?e[k-1]:null;l=l?l[l.length-1]:null;var m=e[k],n=m[0],o=m[m.length-1],p=!1;(!l||n.timestamp-l.timestamp>j)&&(b.push(i.jsx(d("MessengerDateBreak.re").make,{className:"datebreak",date:new Date(n.timestamp)},"db:"+n.message_id)),p=!0);if(n.action_type==="ma-type:log-message"){m.filter(function(a){return a.log_message_type!=="log:error-msg"&&a.log_message_body}).map(function(a){return b.push(i.jsx(c("MPNLogMessage.react"),{message:a},"mg:"+a.message_id))});continue}l=this.$1(e,k);var q=this.$2(f,m,l),r=this.$3(g,o),s=this.$4(o);o=this.$5(o);var t=n.author===d("MercuryIDs").getParticipantIDFromUserID(a);b.push(i.jsx(c("MPNMessageGroup.react"),{persona:o,connectionState:this.props.connectionState,dateBreakPreceeds:p,deliveryTimestamp:s,isFromViewer:t,lastMessageID:h,lastReadTimestamp:r,messages:m,nextGroupTimestamp:l,readReceipt:q?f:null,scrollIntoView:this.props.scrollIntoView},"mg:"+n.message_id))}return b};e.$5=function(a){a=JSON.parse((a=a.platform_xmd)!=null?a:"[]");return a.persona};e.$1=function(a,b){var c=a.length;if(b>=c-1)return Infinity;c=a[b+1][0];if(c.action_type==="ma-type:log-message")return this.$1(a,b+1);else return c.timestamp};e.$3=function(a,b){return b.timestamp>=a?a:Infinity};e.$2=function(a,b,c){return!a?!1:!(b.length===0||a.watermark<b[0].timestamp||a.watermark>=c)};e.$4=function(a){return a.timestamp>this.props.deliveryTimestamp?this.props.deliveryTimestamp:Infinity};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNQuickReplies.react",["cx","fbt","Image.react","LiveChatPluginLoggerUtil","MPNConstants","MPNIdentity","MPNQuickReplyContainer.react","MPNQuickReplyPill.react","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MessagingPluginContext","gkx","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){b=a.call(this,b,e)||this;e=d("MPNIdentity").MPNIdentity.currentUserID();b.$5=!1;d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB&&e&&(b.$1=c("MercuryMessageActions").getForFBID(e),b.$2=new(c("MercuryMessageObject"))(e),b.$3=d("MercuryIDs").getThreadIDFromUserID(b.context.state.pageID),b.$4=d("LiveChatPluginLoggerUtil").getAttributionTags(),b.$5=!0);if(b.context.state.hasActiveAutomation&&b.props.quickReplies.length>0){var f=b.props.quickReplies.map(function(a){return a.title});d("LiveChatPluginLoggerUtil").logImpressionEvents("automation_faq_impression",b.context.state.pageID,null,null,null,null,null,null,{faq_titles:JSON.stringify(f)},e)}return b}var e=b.prototype;e.render=function(){var a=this,b=this.props.quickReplies.map(function(b,e){var f=b.content_type;switch(f){case d("MPNConstants").MPNQuickReplyContentType.TEXT:f=b.image_url?j.jsx(c("Image.react"),{className:"_95s6",src:b.image_url}):null;return j.jsxs(c("MPNQuickReplyPill.react"),{onClick:function(){a.$6(b,b.title,e)},children:[f,b.title]},e);case d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL:case d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER:case d("MPNConstants").MPNQuickReplyContentType.USER_STATE:case d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE:return a.$7(b,e);default:return j.jsx(c("MPNQuickReplyPill.react"),{disabled:!0,tooltip:i._("\u0110\u1ec3 s\u1eed d\u1ee5ng t\u00ednh n\u0103ng n\u00e0y, h\u00e3y d\u00f9ng \u1ee9ng d\u1ee5ng Messenger."),children:b.title},e)}}),e=this.props.type==="horizontal"?d("MPNConstants").MPNQuickReplyLayout.HORIZONTAL:d("MPNConstants").MPNQuickReplyLayout.VERTICAL;return j.jsx(c("MPNQuickReplyContainer.react"),{layout:e,children:b})};e.$6=function(a,b,e){var f=this.context.state,g=f.pageID,h=f.accessToken,i=f.messageStore;f=f.hasActiveAutomation;var j=d("MPNIdentity").MPNIdentity.currentUserState();if(j!==d("MPNIdentity").MPNIdentityState.GUEST&&j!==d("MPNIdentity").MPNIdentityState.FB)return;else if(j===d("MPNIdentity").MPNIdentityState.FB&&!c("gkx")("1422")){if(!this.$1||!this.$2||!this.$3)return;this.$1.send(this.$2.constructCTAConfirmationMessageObject(b,"source:discovery:customer_chat_plugin",this.$3,a,this.$4))}else{j=i.sendQueue;if(!j)return;j.enqueueAndSend(b,this.$5,j.makePlatformTokenForQuickReply(a))}i=d("MPNIdentity").MPNIdentity.currentUserID();d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",i,g,h?"guest_chat_tab":"logged_in_chat_tab",{action_type:"customer_chat_quick_reply_clicked"});f&&d("LiveChatPluginLoggerUtil").logAction("automation_faq_sent",i,g,null,null,null,null,null,null,{faq_index:e.toString(),faq_title:b})};e.$7=function(a,b){var e=this,f=null;switch(a.content_type){case d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL:f=this.props.viewerEmail;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER:f=this.props.viewerPhone;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_STATE:f=this.props.viewerState;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE:f=this.props.viewerZipCode;a.payload=f;break;default:break}if(!f)return null;else return j.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){e.$6(a,String(f),b)},children:f},b)};return b}(j.PureComponent);a.defaultProps={type:"horizontal"};a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("LivechatPluginGuestMessageThreadQueryContainer.react",["Arbiter","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LivechatPluginGuestMessageThreadQueryContainerQuery.graphql","RelayModern","getLiveChatPluginGuestUserRelayEnvironment","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("LivechatPluginGuestMessageThreadQueryContainerQuery.graphql");function a(a,b){c("promiseDone")(d("RelayModern").fetchQuery(c("getLiveChatPluginGuestUserRelayEnvironment")(!1),j,{data:{page_id:a}},{force:!0}),function(a){b(a)},function(b){d("LiveChatPluginLoggerUtil").logImpressionEvents("customer_chat_guest_message_list_fetch_failed",a,JSON.stringify({error:b}),null,null,null)})}function e(a){var b=a.pageID;return i.jsx(d("RelayModern").QueryRenderer,{environment:c("getLiveChatPluginGuestUserRelayEnvironment")(!1),query:j,cacheConfig:{force:!0},variables:{data:{page_id:b}},render:function(a){var e=a.error;a=a.props;if(e){d("LiveChatPluginLoggerUtil").logImpressionEvents("customer_chat_guest_message_list_fetch_failed",b,JSON.stringify({error:e}),null,null,null);return}c("Arbiter").inform(d("LiveChatPluginConstants").UPDATE_MESSAGE_LIST,a);return i.jsx("div",{})}})}e.displayName=e.name+" [from "+f.id+"]";g.LivechatPluginGuestMessageThreadQueryFetchOnce=a;g.LivechatPluginGuestMessageThreadQueryContainer=e}),98);
__d("MercurySyncReadReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={watermark:parseInt(a.watermarkTimestampMs,10),action:parseInt(a.actionTimestampMs,10)},c=a.threadKey.otherUserFbId||a.actorFbId;a=a.threadKey.otherUserFbId||a.threadKey.threadFbId;var d={roger:{}};d.roger[a]={};d.roger[a][c]=b;return d}f.transform=a}),66);
__d("MessagingPluginGraphQLUtils",["MNCommerceCallToActionType","immutable","orEmptyArray"],(function(a,b,c,d,e,f,g){function a(a){if(a==null)return null;if(a.guest_message_thread!=null&&a.guest_message_thread.messages!=null){var b=c("immutable").List(a.guest_message_thread.messages.nodes).map(function(b){return{action_type:b.extensible_message_admin_text_type!=null?"ma-type:log-message":"ma-type:user-generated-message",has_attachment:h(b),attachments:k(b),author:t(b.message_sender),author_email:b.message_sender&&b.message_sender.email,body:b.message&&b.message.text,folder:a.guest_message_thread&&a.guest_message_thread.folder,is_filtered_content:!1,is_sponsored:b.is_sponsored,thread_id:b.message_thread_key&&b.message_thread_key.other_user_id,thread_fbid:b.message_thread_key&&b.message_thread_key.thread_fbid,message_id:b.message_id,timestamp:Number(b.timestamp_precise),platform_xmd:b.platform_xmd_encoded,source:b.tags_list,is_unread:b.unread,offline_threading_id:b.offline_threading_id,log_message_body:b.snippet}});return b}return null}function b(a,b,c){return a.map(function(a){return{action_type:"ma-type:send-message",attachments:[],author:"fbid:"+b,author_email:b+"@facebook.com",body:a.body,folder:"INBOX",has_attachment:!1,is_filtered_content:!1,is_sponsored:!1,thread_id:c,thread_fbid:null,message_id:a.otid,timestamp:a.timestamp,source:[],is_unread:!1,offline_threading_id:a.otid,status:a.state}})}function d(a){var b;if(a==null)return null;if(((b=a.guest_message_thread)==null?void 0:(b=b.last_read_receipt)==null?void 0:b.nodes)!=null&&((b=a.guest_message_thread)==null?void 0:(b=b.last_read_receipt)==null?void 0:(b=b.nodes)==null?void 0:b.length)>0){b=a.guest_message_thread.last_read_receipt.nodes[0];return{action:Number(b.action),watermark:Number(b.watermark)}}return null}function e(a){return a==null?void 0:(a=a.guest_message_thread)==null?void 0:a.unread_count}function h(a){return i(a.blob_attachments)||j(a.extensible_attachment)}function i(a){return a!==null}function j(a){return a!=null}function k(a){return l(a.blob_attachments).concat(m(a))}function l(a){return!a?[]:a.map(function(a){if(a.video_type!=null)return{app_attribution:null,attach_type:"video",blurred_image_uri:null,icon_type:"attach:video",large_preview_url:a.image.uri,large_preview_height:null,large_preview_width:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:a.playable_url,url:a.playable_url,metadata:{fbid:a.legacy_attachment_id,dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y}}};else if(a.file_type!=null)return{app_attribution:null,attach_type:"file",blurred_image_uri:null,icon_type:"attach:file",large_preview_url:null,large_preview_height:null,large_preview_width:null,metadata:null,name:a.filename,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:null,url:a.url};else return{app_attribution:null,attach_type:"photo",blurred_image_uri:null,icon_type:"attach:image",large_preview_url:a.image.uri,large_preview_height:a.image.height,large_preview_width:a.image.width,metadata:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:null,url:null}})}function m(a){var b,d=a.extensible_attachment;if(!d)return[];d=d.story_attachment;var e=d.target;return[{app_attribution:null,attach_type:"share",blurred_image_uri:null,icon_type:null,large_preview_url:null,large_preview_height:null,large_preview_width:null,metadata:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",thumbnail_url:null,url:null,share:{action_links:[],deduplication_key:d.deduplication_key,media:{animated_image:(b=d.media)==null?void 0:(b=b.animated_image)==null?void 0:b.uri,animated_image_size:{height:(b=d.media)==null?void 0:(b=b.animated_image)==null?void 0:b.height,width:(b=d.media)==null?void 0:(b=b.animated_image)==null?void 0:b.width},image:(b=d.media)==null?void 0:(b=b.image)==null?void 0:b.uri,image_size:{height:(b=d.media)==null?void 0:(b=b.image)==null?void 0:b.height,width:(b=d.media)==null?void 0:(b=b.image)==null?void 0:b.width},playable:(b=d.media)==null?void 0:b.is_playable},messenger_ctas:[],properties:{},share_id:a.message_id,source:(b=d.source)==null?void 0:b.text,style_list:d.style_list,subattachments:n(d),target:{call_to_actions:c("orEmptyArray")((a=e.call_to_actions)==null?void 0:a.map(function(a){return s(a)})),items:p(e),message:e.snippet},title:o(e),uri:e.url}}]}function n(a){if(!a||!a.target)return[];if(!a.subattachments)return[];var b=p(a.target);return a.subattachments.map(function(a,c){var d;return{action_links:[],deduplication_key:a.deduplication_key,media:{animated_image:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.uri,animated_image_size:{height:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.height,width:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.width},image:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.uri,image_size:{height:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.height,width:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.width},playable:(d=a.media)==null?void 0:d.is_playable},messenger_ctas:[],properties:{},source:a.source.text,style_list:a.style_list,target:b[c]}})}function o(a){a=a.business_items;if(!a||!a.nodes)return"";var b="";for(var c=0;c<a.nodes.length-1;c++)b=b+a.nodes[c].name+", ";a.nodes[a.nodes.length-1]&&(b+=a.nodes[a.nodes.length-1].name);return b}function p(a){a=a.business_items;return!a||!a.nodes?[]:a.nodes.map(function(a){return q(a)})}function q(a){return!a?null:{call_to_actions:a.call_to_actions.map(function(a){return s(a)}),default_action:s(a.default_action),desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,media_blob_attachments:a.media_blob_attachments.map(function(a){return r(a)}),metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},name:a.name,source:a.source_name,text:"",thumb_url:a.image_url,title:a.name}}function r(a){return!a?null:{playable_url:a.playable_url,height:a.height,width:a.width,id:a.id}}function s(a){return!a?null:{action_link:a.action_url,action_type:c("MNCommerceCallToActionType")[a.action_open_type],action_open_type:a.action_open_type,action_objects:[{}],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,page_id:a.page_id,payment_metadata:null,render_style:a.cta_render_style,should_show_user_confirmation:!1,title:a.action_title,webview_metadata:null}}function t(a){return a!=null&&a.id!=null?"fbid:"+a.id:""}g.getMercuryPayloadFromGraphQLResponse=a;g.getMercuryPayloadFromOptimisticMessage=b;g.getLatestReadReceiptFromGraphQLResponse=d;g.getGuestThreadUnreadCount=e;g._hasAttachments=h;g._hasBlobAttachments=i;g._hasXMA=j;g._getAttachments=k;g._getBlobAttachments=l;g._getXMAFromMessageNode=m;g._buildSubattachmentsFromParentStory=n;g._getTargetTitleFromGraphQLTarget=o;g._getTargetItemsFromGraphQLTarget=p;g._getMercuryBusinessItemFromGraphQL=q;g._getMediaBlobAttachmentFromGraphQL=r;g._getMercuryCallToActionFromGraphQL=s;g._getAuthorFbid=t}),98);
__d("MessagingPluginPendingMessageState",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=4;f.SENDING=a;f.SENT=b;f.FAILED=c}),66);
__d("MessagingPluginGuestSendTextMessage",["MessagingPluginGuestSendTextMessageMutation.graphql","RelayModern","getLiveChatPluginGuestUserRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){d("RelayModern").commitMutation(c("getLiveChatPluginGuestUserRelayEnvironment")(a),{mutation:h!==void 0?h:h=b("MessagingPluginGuestSendTextMessageMutation.graphql"),variables:e,onCompleted:f&&f.onSuccess,onError:f&&f.onFailure})}g.commit=a}),98);
__d("MessagingPluginSendQueue",["$InternalEnum","CurrentUser","LiveChatPluginLocalStorageUtil","LiveChatPluginLoggerUtil","MessagingPluginGuestSendTextMessage","MessagingPluginPendingMessageState","Random","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEXT:"text",POSTBACK:"postback",QUICK_REPLY:"quick_reply"});a=function(){function a(a,b,d,e){this.isSending=!1,this.pageID=a,this.userID=b,this.sessionKey=d,this.pendingMessages=c("immutable").List(),this.serverPartialMessages=c("immutable").List(),this.failedMessages=c("immutable").List(),this.updateMessageStoreCallback=e,this.requestID=c("LiveChatPluginLocalStorageUtil").getRequestID()}var b=a.prototype;b.getOptimisticMessages=function(){return this.pendingMessages.concat(this.failedMessages).concat(this.serverPartialMessages).sort(function(a,b){return a.timestamp-b.timestamp})};b.confirmServerPartialMessages=function(a){this.serverPartialMessages=this.serverPartialMessages.filter(function(b){var c=a.find(function(a){return a.otid===b.otid});return!c})};b.makePlatformTokenForPostbackCTA=function(a){var b;return JSON.stringify((b={},b[h.POSTBACK]={cta_id:a,prev_message_id:null,force_handle:!0,ref:null},b))};b.makePlatformTokenForQuickReply=function(a){var b;return JSON.stringify((b={},b[h.QUICK_REPLY]={payload:a.payload},b))};b.enqueueAndSend=function(a,b,c){var e=this.makeOfflineThreadingID();this.pendingMessages=this.pendingMessages.push({otid:e,body:a,timestamp:Date.now(),platformToken:c,state:d("MessagingPluginPendingMessageState").SENDING});this.updateMessageStoreCallback&&this.updateMessageStoreCallback();this.isSending||this.sendNext(b)};b.sendNext=function(a){if(this.pendingMessages.size===0){this.isSending=!1;return}this.isSending=!0;var b=this.pendingMessages.first();this.performMutation(b,a)};b.performMutation=function(a,b){var e=this,f=c("CurrentUser").getID()!=="0";f={requestID:this.requestID,isLoggedIn:f.toString()};d("MessagingPluginGuestSendTextMessage").commit(b,{input:{client_mutation_id:a.otid,message_text:a.body,platform_token:a.platformToken,page_id:this.pageID,logging_extra:JSON.stringify(f)}},{onSuccess:function(a){a=e.pendingMessages.first();e.pendingMessages=e.pendingMessages.slice(1);e.serverPartialMessages=e.serverPartialMessages.push(babelHelpers["extends"]({},a,{state:d("MessagingPluginPendingMessageState").SENT}));e.updateMessageStoreCallback&&e.updateMessageStoreCallback();e.sendNext(b)},onFailure:function(c){var f=h.TEXT;try{if(a.platformToken!=null){var g=JSON.parse(a.platformToken);(g==null?void 0:g.postback)!=null?f=h.POSTBACK:(g==null?void 0:g.quick_reply)!=null&&(f=h.QUICK_REPLY)}}catch(a){}d("LiveChatPluginLoggerUtil").logImpressionEvents("customer_chat_guest_message_send_failed",e.pageID,JSON.stringify({error:c,message_type:f}),null,null,null);g=e.pendingMessages.first();e.pendingMessages=e.pendingMessages.slice(1);e.failedMessages=e.failedMessages.push(babelHelpers["extends"]({},g,{state:d("MessagingPluginPendingMessageState").FAILED}));e.updateMessageStoreCallback&&e.updateMessageStoreCallback();e.sendNext(b)}})};b.makeOfflineThreadingID=function(){var a=Date.now(),b=d("Random").uint32();a=a&2147483647;a=a*Math.pow(2,21);b=(b&2097151)+a;return b.toString()};return a}();g["default"]=a}),98);
__d("XMNMessagingPluginGuestExpirationAdminTextController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/live_chat/guest_expiration_admin_text/",{page_id:{type:"FBID",required:!0},access_token:{type:"String",required:!0}})}),null);
__d("LiveChatMessageStore",["Arbiter","AsyncRequest","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LivechatPluginGuestMessageThreadQueryContainer.react","MercuryIDs","MercuryMessageStore","MercurySyncDeltaTypes","MercurySyncNewMessageTransformer","MercurySyncReadReceiptTransformer","MercuryThreadlistConstants","MessagingPluginGraphQLUtils","MessagingPluginPendingMessageState","MessagingPluginSendQueue","MessengerMQTTConnectionEvents","Sound","SubscriptionsHandler","UserActivity","XMNMessagingPluginGuestExpirationAdminTextController","immutable","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g,h){this.$5=b||d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE,this.$4=a,this.$1=e,this.$2=f,this.$7=c("immutable").List(),this.$8=c("immutable").List(),this.$10=null,this.$9={action:0,watermark:0},this.$12=new Set(),this.$11=g,this.$13=h,this.$14=!1,this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$15():this.$16()}var b=a.prototype;b.$17=function(a){var b=d("MercurySyncNewMessageTransformer").transform(this.$1,a);a["class"]==c("MercurySyncDeltaTypes").AdminTextMessage&&(b=babelHelpers["extends"]({},b,{action_type:"ma-type:log-message",log_message_body:a.messageMetadata.adminText}));return b};b.$18=function(a){var b=this.$7||c("immutable").List();b=b.push(a);var d=new Map();b.forEach(function(a){d.set(a.offline_threading_id,a)});var e=c("immutable").List();d.forEach(function(a){e=e.push(a)});return e};b.$15=function(){var a=this;this.$6&&this.$6.destroy();this.$3&&this.$3.release();this.$6=new(c("MercuryMessageStore"))(this.$4,null,this.$1);this.$3=new(c("SubscriptionsHandler"))();if(this.$3==null||this.$6==null)return;this.$3.addSubscriptions(this.$6.subscribe(function(b){var d=c("immutable").List(b.messages.sort(function(a,b){return a.timestamp-b.timestamp})),e=a.$7||c("immutable").List(),f=new Map();e.forEach(function(a){f.set(a.offline_threading_id,a)});d.forEach(function(a){f.set(a.offline_threading_id,a)});var g=c("immutable").List();f.forEach(function(a){g=g.push(a)});a.$7=g;a.$19(b.eventType)}));this.$3.addSubscriptions(c("Arbiter").subscribe(d("MessengerMQTTConnectionEvents").DELTA_EVENT,function(b,e){b=e.obj.delta;if(b["class"]===c("MercurySyncDeltaTypes").NewMessage||b["class"]===c("MercurySyncDeltaTypes").AdminTextMessage){e=a.$17(b);a.$7=a.$18(e);a.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE)}}))};b.$16=function(){var a=this;this.$6&&this.$6.destroy();this.$3&&this.$3.release();this.$3=new(c("SubscriptionsHandler"))();if(this.$3==null)return;this.$3.addSubscriptions(c("Arbiter").subscribe(d("MessengerMQTTConnectionEvents").DELTA_EVENT,function(b,e){b=e.obj.delta;d("LiveChatPluginLoggerUtil").logDelta(a.$1,a.$2,b["class"],b.seqID,!0);if(b["class"]!==c("MercurySyncDeltaTypes").NewMessage&&b["class"]!==c("MercurySyncDeltaTypes").ReadReceipt&&b["class"]!==c("MercurySyncDeltaTypes").MarkRead&&b["class"]!==c("MercurySyncDeltaTypes").AdminTextMessage)return;if(b["class"]===c("MercurySyncDeltaTypes").ReadReceipt){e=d("MercurySyncReadReceiptTransformer").transform(b);e=e.roger[a.$2][a.$2];a.$9=e;return}else if(b["class"]===c("MercurySyncDeltaTypes").MarkRead)a.$10=0,a.$12.clear(),c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,0);else{e=a.$17(b);a.$20(e);e.author!=d("MercuryIDs").getParticipantIDFromUserID(a.$1)&&!a.$12.has(e.message_id)&&b["class"]===c("MercurySyncDeltaTypes").NewMessage&&(a.$10!=null?a.$10+=1:a.$10=1,a.$12.add(e.message_id),c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,a.$10),a.$21(e.timestamp));if(!a.$14&&e.action_type==="ma-type:user-generated-message"){b=c("XMNMessagingPluginGuestExpirationAdminTextController").getURIBuilder().setString("access_token",a.$13).setFBID("page_id",a.$2).getURI();new(c("AsyncRequest"))().setURI(b).send();a.$14=!0}b=a.$7||c("immutable").List();b=b.push(e);var f=new Map();b.forEach(function(a){f.set(a.message_id,a)});var g=c("immutable").List();f.forEach(function(a){g=g.push(a)});a.$7=g;a.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE);return}}));this.$22()};b.$22=function(){var a=this;d("LivechatPluginGuestMessageThreadQueryContainer.react").LivechatPluginGuestMessageThreadQueryFetchOnce(this.$2,function(b){var e;a.$9=(e=a.$9)!=null?e:d("MessagingPluginGraphQLUtils").getLatestReadReceiptFromGraphQLResponse(b);e=d("MessagingPluginGraphQLUtils").getGuestThreadUnreadCount(b);a.$10===null&&e!=null&&(a.$10=e,c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,a.$10));e=d("MessagingPluginGraphQLUtils").getMercuryPayloadFromGraphQLResponse(b);e=e||c("immutable").List();var f=new Map();e=e.concat(a.$7);e.forEach(function(a){f.set(a.message_id,a)});var g=c("immutable").List();f.forEach(function(b){!a.$14&&b.action_type==="ma-type:user-generated-message"&&(a.$14=!0),a.$20(b),g=g.push(b)});a.$7=g;c("setTimeout")(function(){a.$19(d("LiveChatPluginConstants").INITIAL_FETCH)},1e3)})};b.getMessageListWithOptimisticMessages=function(){var a=this;if(!this.sendQueue)return this.$7;var b=this.sendQueue.getOptimisticMessages(),c=b.filter(function(b){var c=a.$7.find(function(a){return a.offline_threading_id===b.otid});return c!=null});b=b.filter(function(a){var b=c.find(function(b){return b.otid===a.otid});return!b});this.sendQueue&&this.sendQueue.confirmServerPartialMessages(c);b=b.map(function(a){return a.state===d("MessagingPluginPendingMessageState").FAILED?a:babelHelpers["extends"]({},a,{timestamp:a.timestamp+6e5})});b=d("MessagingPluginGraphQLUtils").getMercuryPayloadFromOptimisticMessage(b,this.$1,this.$2);return this.$7.concat(b).sort(function(a,b){return a.timestamp-b.timestamp})};b.setUpGuestMessageSendQueue=function(a){this.sendQueue=new(c("MessagingPluginSendQueue"))(this.$2,this.$1,a,this.optimisticSendUpdateCallback.bind(this))};b.destroy=function(){this.$6&&this.$6.destroy(),this.$3&&this.$3.release(),this.$7=c("immutable").List()};b.subscribe=function(a){return this.addRetroactiveListener("messageUpdate",a)};b.fetchMoreMessages=function(){return this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$6!=null&&this.$6.fetchMoreMessages():!1};b.hasFetchedAll=function(){return this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$6!=null&&this.$6.hasFetchedAll()||this.$7.size>=d("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT:!0};b.optimisticSendUpdateCallback=function(){this.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE)};b.getLatestReadReceipt=function(){return this.$9};b.$21=function(a){if(!c("UserActivity").isOnTab()){var b,e;b=(b=this.$11)==null?void 0:b.get("sound.notif_ogg_url");e=(e=this.$11)==null?void 0:e.get("sound.notif_mp3_url");b!=null&&e!=null&&d("Sound").play([b,e],a,!1)}};b.$20=function(a){a.timestamp>this.$9.action&&a.author!=d("MercuryIDs").getParticipantIDFromUserID(this.$1)&&(this.$9.action=a.timestamp,this.$9.watermark=a.timestamp)};b.$19=function(a){var b=this.getMessageListWithOptimisticMessages();this.$8=b;this.releaseHeldEventType("messageUpdate");this.emitAndHold("messageUpdate",{messages:b,eventType:a})};return a}();c("mixInEventEmitter")(a,{messageUpdate:!0});g["default"]=a}),98);
__d("LiveChatPluginUserContactQuery",["LiveChatPluginLoggerUtil","LiveChatPluginUserContactQuery.graphql","RelayFBEnvironment","RelayModern","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("LiveChatPluginUserContactQuery.graphql");a=function(a,b){c("promiseDone")(d("RelayModern").fetchQuery(c("RelayFBEnvironment"),i,{}),function(b){var c;c=b==null?void 0:(c=b.viewer)==null?void 0:(c=c.user)==null?void 0:c.all_phones;var d=c?c.find(function(a){return a.is_preferred}):null;!d&&c&&c[0]&&(d=c[0]);b=b==null?void 0:(c=b.viewer)==null?void 0:c.all_emails;c=b?b.find(function(a){return a.is_primary}):null;!c&&b&&b[0]&&(c=b[0]);a({phone:(b=(b=d)==null?void 0:(d=b.phone_number)==null?void 0:d.universal_number)!=null?b:"",email:(b=(d=c)==null?void 0:d.display_email)!=null?b:""})},function(a){d("LiveChatPluginLoggerUtil").logImpressionEvents("live_chat_user_contact_fetch_failed",b,JSON.stringify(babelHelpers["extends"]({},d("LiveChatPluginLoggerUtil").getErrorData(a))),null,null,null)})};g.fetch=a}),98);
__d("XMessagingPluginMarkReadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/live_chat/mark_read/",{access_token:{type:"String"},ids:{type:"StringToBoolMap",required:!0},watermark_timestamp:{type:"Int"}})}),null);
__d("MessagingPluginDialogBody.react",["cx","fbt","Arbiter","AsyncRequest","DOM","Event","LiveChatMessageStore","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LiveChatPluginTypingIndicator.react","LiveChatPluginUserContactQuery","MPNConstants","MPNIcebreakers.react","MPNIdentity","MPNLocalState","MPNMessageList.react","MPNQuickReplies.react","MPNStorage","MPNXDMessageManager","MercuryIDs","MessagingPluginContext","MessengerDeliveryReceipt.bs","MessengerScrollableArea.react","MessengerSpinner.react","MessengerUserProfileLocationUtils","QE2Logger","ReactDOM","SubscriptionsHandler","UserActivity","XMessagingPluginMarkReadController","clearTimeout","gkx","immutable","promiseDone","react","setTimeout"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=35,l=4e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={connectionState:d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED,messages:c("immutable").List(),quickRepliesOffset:0,readReceipt:null,showConnectionBanner:!1,typing:!1,viewerEmail:null,viewerPhone:null,viewerState:null,viewerZipCode:null,shouldShowIcebreakers:!1,shouldShowWelcomeMessage:!1,unreadCount:0,userID:d("MPNIdentity").MPNIdentity.currentUserID(),hasLoggedImpression:!1},e.$2=!1,e.$3=null,e.$4=0,e.$5=0,e.$9="",e.$12=null,e.$14=!1,e.$26=function(a,b){var c=e.$17();if(!c)return;var d=c.getScrollOffsetForElement(a);a=d+a.offsetHeight;var f=c.getScrollTop(),g=f+c.getClientHeight();a=a-g;if(d<=f){g=b?Math.max(0,d-30):d;c.setScrollTop(g,!0)}else a>-15&&a<36&&c.setScrollTop(f+Math.abs(a)+15,!0)},e.$32=function(){c("setTimeout")(function(){e.$22()},l)},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidMount=function(){var a=this,b=this.context.state,e=b.pageID,f=b.pageName,g=b.hasAutomation,h=b.useNewUpgradeTriggersWithNewDesign,i=b.showUpgradeUpsellPrompt;this.$2=!0;this.$9=d("MercuryIDs").getThreadIDFromUserID(e);this.$15();this.$12=c("Arbiter").subscribe(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,function(b,c){a.setState({unreadCount:c}),a.$16(f)});d("MPNIdentity").MPNIdentity.currentUserState()!==d("MPNIdentity").MPNIdentityState.FB&&!g&&this.setState({shouldShowIcebreakers:!0});d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.GUEST&&window.setTimeout(function(){if(a.$14)return;h&&i&&(c("MPNStorage").setShowUpgradePrompt(d("MPNConstants").MPNUpgradePrompt.OPEN_THREAD),a.context.dispatchAction({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:d("MPNConstants").MPNUpgradePrompt.OPEN_THREAD}),a.$14=!0)},6e4)};e.componentWillUnmount=function(){this.$2=!1,this.$7&&this.$7.destroy(),this.$8&&this.$8.release(),this.$12&&c("Arbiter").unsubscribe(this.$12),this.$13&&c("clearTimeout")(this.$13),this.context.state.hasActiveAutomation&&this.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!1})};e.UNSAFE_componentWillUpdate=function(){var a=this.$17();a&&(this.$4=a.getScrollHeight(),this.$5=a.getScrollTop())};e.componentDidUpdate=function(a,b){a=d("MPNIdentity").MPNIdentity.currentUserID();(this.state.userID!==a||this.context.state.messageStore==null)&&(this.setState({userID:a}),this.$15());this.$18(this.state.messages);var e=this.$19();if(e){var f=!1,g=!1;e.data.forEach(function(a){a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL||a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER?f=!0:(a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_STATE||a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE)&&(g=!0)});f&&this.$20();g&&this.$21()}if(((e=c("MPNStorage").getFBStorageState())==null?void 0:e.visibility)===d("MPNConstants").MPNVisibility.NOT_HIDDEN&&this.state.unreadCount>0){e=c("XMessagingPluginMarkReadController").getURIBuilder().setString("access_token",this.context.state.accessToken).setStringToBoolMap("ids",(e={},e[this.context.state.pageID]=!0,e)).setInt("watermark_timestamp",Date.now()).getURI();new(c("AsyncRequest"))().setURI(e).send();this.setState({unreadCount:0});c("MPNXDMessageManager").setTabNotification(null)}e=this.$17();var h=d("ReactDOM").findDOMNode(this);if(!h||!(h instanceof HTMLElement)||a==null)return;h=h.clientHeight;if(this.$1){var i=d("ReactDOM").findDOMNode(this.$1);i&&i instanceof HTMLElement&&(this.state.quickRepliesOffset!==h-i.clientHeight&&this.setState({quickRepliesOffset:h-i.clientHeight}))}if(!e)return;h=this.state.messages!==b.messages&&this.state.messages.last()!==b.messages.last()&&!this.state.messages.isEmpty()&&this.state.messages.last().author===d("MercuryIDs").getParticipantIDFromUserID(a);if(h)this.$22(),this.$23();else{i=e.getScrollHeight();if(i!==this.$4){b=i-this.$4+this.$5;this.$6&&this.$6.scrollToPosition(b)}else this.$23()}if(this.$10){a=d("ReactDOM").findDOMNode(this.$10);a instanceof HTMLElement&&e.distanceToBottom()<=1.25*a.offsetHeight?e.scrollToBottom(!0):a&&(this.$6&&this.$6.scrollToPosition(this.$5))}};e.render=function(){var a=this,b=this.context.state.pageID;try{var e;return j.jsxs(j.Fragment,{children:[this.$24(),j.jsx(c("MessengerScrollableArea.react"),{className:c("gkx")("1990737")?"_9qci":"",height:this.$25(),ref:function(b){a.$6=b},tabIndex:0,children:j.jsxs("div",{ref:function(b){a.$1=b},children:[j.jsx("div",{className:"preventScrollOverflow",children:j.jsxs("div",{className:"conversationContainer",children:[j.jsx(c("MPNMessageList.react"),{connectionState:this.state.connectionState,deliveryTimestamp:d("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipt,this.$9),messages:this.state.messages,shouldShowWelcomeMessage:this.state.shouldShowWelcomeMessage,readReceipt:(e=this.state.readReceipt)!=null?e:(e=this.$7)==null?void 0:e.getLatestReadReceipt(),scrollIntoView:this.$26}),j.jsx(c("LiveChatPluginTypingIndicator.react"),{pageIsTyping:this.state.typing,ref:function(b){a.$10=b}})]})}),j.jsxs("div",{style:{position:"relative",top:Math.max(this.state.quickRepliesOffset,0)},children:[this.$27(),this.state.shouldShowIcebreakers?j.jsx(c("MPNIcebreakers.react"),{threadID:this.$9}):null]})]})},"scrollable_area")]})}catch(a){e=this.context.state.showUpgradeUpsellPrompt;d("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",b,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":e?"guest_chat_tab_with_upgrade_enabled":"guest_chat_tab",a.name,a.message,a.stack);return null}};e.$16=function(a){a=i._("{pageName} \u0111\u00e3 nh\u1eafn tin cho b\u1ea1n",[i._param("pageName",a)]).toString();c("MPNXDMessageManager").setTabNotification(a);c("UserActivity").subscribeOnce(function(){c("MPNXDMessageManager").setTabNotification(null)})};e.$27=function(){var a=this.$19();return!a?null:j.jsx(c("MPNQuickReplies.react"),{quickReplies:a.data,type:a.type,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone,viewerState:this.state.viewerState,viewerZipCode:this.state.viewerZipCode})};e.$28=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID(),b=this.context.state,c=b.pageID,e=b.continueClickTime,f=b.pluginMountTime;b=b.showUpgradeUpsellPrompt;d("LiveChatPluginLoggerUtil").logImpressionUsingFalco(c,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":b?"guest_chat_tab_with_upgrade_enabled":"guest_chat_tab",(e=e)!=null?e:f,null,null,null,a);b&&d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.GUEST&&d("QE2Logger").logExposureForPage("chat_plugin_new_upgrade_triggers",c.toString())};e.$29=function(a,b,c){if(a===d("LiveChatPluginConstants").GUEST_CHAT_MODE&&this.context.state.showUpgradeUpsellPrompt&&this.$30(b))return d("MPNConstants").MPNUpgradePrompt.BACK_AND_FORTH;if(a!==d("LiveChatPluginConstants").GUEST_CHAT_MODE||!this.context.state.showUpgradeUpsellPrompt||this.context.state.isInstantlyResponsive)return d("MPNConstants").MPNUpgradePrompt.NOT_SHOWN;if(this.context.state.hasAutomation){if(this.$31(b)){this.$14=!0;return d("MPNConstants").MPNUpgradePrompt.DONT_WAIT_FOR_REPLY_UPSELL}}else{var e=d("MPNIdentity").MPNIdentity.currentUserID();c===d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE?a=b.butLast():a=b;this.$3==null&&(this.$3=a.some(function(a){return d("MercuryIDs").getUserIDFromParticipantID(a.author)==e}));if(!this.$3&&b.get(-1)!=null&&b.get(-1).author!=null&&d("MercuryIDs").getUserIDFromParticipantID(b.get(-1).author)===e){this.$3=!0;this.$14=!0;return d("MPNConstants").MPNUpgradePrompt.DONT_WAIT_FOR_REPLY_UPSELL}}return d("MPNConstants").MPNUpgradePrompt.NOT_SHOWN};e.$30=function(a){var b=this,c=this.context.state.useNewUpgradeTriggersWithNewDesign;if(this.$14||!c)return!1;var e=d("MPNIdentity").MPNIdentity.currentUserID();c=a.filter(function(a){return a.action_type!=="ma-type:log-message"&&d("MercuryIDs").getUserIDFromParticipantID(a.author)===e}).count();a=a.filter(function(a){return a.action_type!=="ma-type:log-message"&&d("MercuryIDs").getUserIDFromParticipantID(a.author)===b.context.state.pageID}).count();if(c===1&&a>1||a===1&&c>=1||this.context.state.optimisticStorageState.showUpgradePrompt==d("MPNConstants").MPNUpgradePrompt.BACK_AND_FORTH){this.$14=!0;return!0}return!1};e.$15=function(){var a=this;this.$7&&this.$7.destroy();this.$8&&this.$8.release();this.setState({hasLoggedImpression:!1});var b=d("MPNIdentity").MPNIdentity.currentUserID();if(b==null)return;if(this.context.state.optimisticStorageState.chatState!=d("MPNLocalState").MPNChatState.CHAT_NOT_STARTED){var e=this.context,f=e.state,g=e.dispatchAction;e=d("MPNIdentity").MPNIdentity.currentUserState();var h=e===d("MPNIdentity").MPNIdentityState.FB?d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE:e===d("MPNIdentity").MPNIdentityState.GUEST?d("LiveChatPluginConstants").GUEST_CHAT_MODE:null;e=h===d("LiveChatPluginConstants").GUEST_CHAT_MODE?f.accessToken:null;this.$7=new(c("LiveChatMessageStore"))(this.$9,h,b,this.context.state.pageID,this.context.state.soundURLs,e);g({type:"SET_UP_MESSAGE_STORE",messageStore:this.$7});this.$7&&this.$7.setUpGuestMessageSendQueue(e);this.$8=new(c("SubscriptionsHandler"))();if(this.$8===null)return;this.$8!=null&&this.$8.addSubscriptions(c("Arbiter").subscribe(d("LiveChatPluginConstants").TYPING_UPDATE,function(b,d){d=!!d,d!==a.state.typing&&(a.setState({typing:d}),d&&(a.$11=c("setTimeout")(function(){a.setState({typing:!1})},15e3)))}),c("Arbiter").subscribe(d("LiveChatPluginConstants").STATE_UPDATE,function(d,b){d=null;b!==a.state.connectionState&&(a.setState({connectionState:b},a.$32),c("clearTimeout")(d),d=c("setTimeout")(function(){a.setState({showConnectionBanner:!0})},l))}));this.$8!=null&&this.$7!=null&&this.$8.addSubscriptions(this.$7.subscribe(function(e){a.setState(function(f){var i=c("immutable").List(e.messages.sort(function(a,b){return a.timestamp-b.timestamp}));!a.context.state.threadExists&&i.size>=1&&g({type:"UPDATE_THREAD_EXISTS"});var j=a.$29(h,i,e.eventType);j!==d("MPNConstants").MPNUpgradePrompt.NOT_SHOWN&&j!==a.context.state.optimisticStorageState.showUpgradePromptType&&(c("MPNStorage").setShowUpgradePrompt(j),g({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:j}));j={};i.get(-1)!=null&&i.get(-1).author!=null&&d("MercuryIDs").getUserIDFromParticipantID(i.get(-1).author)!==b&&f.typing&&(a.$11&&c("clearTimeout")(a.$11),j.typing=!1);var k=f.hasLoggedImpression;!f.hasLoggedImpression&&a.$7!=null&&a.$7.hasFetchedAll()&&(a.$28(),k=!0);return babelHelpers["extends"]({messages:i,readReceipt:(f=a.$7)==null?void 0:f.getLatestReadReceipt(),shouldShowIcebreakers:a.$33(i),shouldShowWelcomeMessage:!0,hasLoggedImpression:k},j)})}))}};e.$33=function(a){var b=this.context.state.hasAutomation,c=d("MPNIdentity").MPNIdentity.currentUserState();c===d("MPNIdentity").MPNIdentityState.FB?c=this.$7!=null&&this.$7.hasFetchedAll()&&a.size===0:c=!b&&(a.size===0||this.$7!=null&&this.$7.hasFetchedAll()&&a.size===1&&a.get(0).action_type==="ma-type:log-message");return c};e.$17=function(){return this.$6&&this.$6.getArea()};e.$22=function(){this.$6&&this.$6.scrollToBottom()};e.$34=function(){var a=d("ReactDOM").findDOMNode(this);return a&&a.parentNode&&a.parentNode instanceof HTMLElement?a.parentNode.getBoundingClientRect().height+"px":"100%"};e.$23=function(){var a=this;c("DOM").scry(d("ReactDOM").findDOMNode(this),"img").forEach(function(b){if(b.complete)return;var d=c("Event").listen(b,"load",function(){a.$22(),d.remove()})})};e.$25=function(){var a;!this.context.state.isMobile?a="100%":a=(this.props.dialogBodyHeight===-1?this.$34():this.props.dialogBodyHeight)+"px";this.state.showConnectionBanner&&!navigator.userAgent.includes("Firefox")&&(a=a==="100%"?"91%":Math.max(parseInt(a,10)-k,0).toString()+"px");return a};e.$24=function(){if(!this.state.showConnectionBanner||navigator.userAgent.includes("Firefox"))return null;var a=null;switch(this.state.connectionState){case d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED:a=null;this.setState({showConnectionBanner:!1});break;case d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTING:a=j.jsxs("div",{className:"connecting",children:[j.jsx(c("MessengerSpinner.react"),{className:"connectingSpinner",color:"grey"}),i._("\u0110ang k\u1ebft n\u1ed1i...")]});break;case d("LiveChatPluginConstants").MQTTGatewayConnectionState.DISCONNECTED:a=j.jsx("div",{className:"disconnected",children:i._("Kh\u00f4ng c\u00f3 k\u1ebft n\u1ed1i Internet")});break}return a&&j.jsx("div",{className:"_2oap",children:a},"connection_banner")};e.$35=function(a){var b=a.last();for(var c=a.size-1;c>=0;c--){var d=a.get(c);if(d.action_type==="ma-type:user-generated-message"||d.action_type==="ma-type:send-message"){b=d;break}}return b};e.$36=function(a){var b=a.last();for(var c=a.size-1;c>=0;c--){var d=a.get(c);if(d.action_type==="ma-type:user-generated-message"||d.action_type==="ma-type:log-message"){b=d;break}}return b!=null&&b.action_type==="ma-type:log-message"?b:null};e.$19=function(){var a=this.$37(this.state.messages);if(a&&a.quick_replies&&a.quick_replies.length>0){return{data:a.quick_replies,type:(a=a.quick_reply_type)!=null?a:"horizontal"}}return null};e.$20=function(){var a=this;if(this.state.viewerEmail!==null&&this.state.viewerPhone!==null)return;d("LiveChatPluginUserContactQuery").fetch(function(b){a.setState({viewerEmail:b.email,viewerPhone:b.phone})},this.context.state.pageID)};e.$21=function(){var a=this;if(this.state.viewerState!==null&&this.state.viewerZipCode!==null)return;c("promiseDone")(d("MessengerUserProfileLocationUtils").FetchMessengerUserRegionAndPostalCode(),function(b){var c=b==null?void 0:b.region;b=b==null?void 0:b.postal_code;a.setState({viewerState:c,viewerZipCode:b})})};e.$31=function(a){a=this.$36(a);return a!=null&&a.source==="source:discovery:customer_chat_plugin_escalation"};e.$18=function(a){if(this.$31(a)&&this.context.state.hasActiveAutomation){this.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!1});return}a=this.$37(a);if(a===null)return;a.message_classification==="chat_plugin_automation"&&!this.context.state.hasActiveAutomation&&this.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!0})};e.$37=function(a){a=this.$35(a);if(this.state.userID==null||!a||!a.platform_xmd||a.author===d("MercuryIDs").getParticipantIDFromUserID(this.state.userID))return null;try{return JSON.parse(a.platform_xmd)}catch(a){return null}};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);